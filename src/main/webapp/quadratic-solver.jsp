<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" isELIgnored="true" %>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FREE Quadratic Equation Solver - Standard, Vertex, Factored Forms & Inequalities</title>
  <meta name="description" content="Free online quadratic equation solver supporting standard form ax¬≤+bx+c=0, vertex form a(x-h)¬≤+k=0, factored form a(x-r‚ÇÅ)(x-r‚ÇÇ)=0, and inequalities. Step-by-step solutions with quadratic formula, completing square, factoring, and graphing.">
  <meta name="keywords" content="quadratic equation solver, quadratic formula calculator, vertex form calculator, factored form solver, quadratic inequality solver, ax¬≤+bx+c=0, a(x-h)¬≤+k, discriminant calculator, parabola graphing, completing the square, factoring quadratics, interval notation, step by step solutions">
  <link rel="canonical" href="https://8gwifi.org/quadratic-solver.jsp">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://8gwifi.org/quadratic-solver.jsp">
  <meta property="og:title" content="FREE Quadratic Solver - Standard, Vertex, Factored Forms & Inequalities">
  <meta property="og:description" content="Solve quadratic equations in standard, vertex, and factored forms. Solve inequalities with interval notation. Step-by-step solutions with graphing.">
  <meta property="og:image" content="https://8gwifi.org/images/quadratic-solver-preview.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://8gwifi.org/quadratic-solver.jsp">
  <meta property="twitter:title" content="FREE Quadratic Solver - All Forms & Inequalities">
  <meta property="twitter:description" content="Solve quadratic equations in standard, vertex, factored forms plus inequalities with step-by-step solutions.">
  <meta property="twitter:image" content="https://8gwifi.org/images/quadratic-solver-preview.png">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Quadratic Equation Solver",
    "applicationCategory": "EducationalApplication",
    "operatingSystem": "Any",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "description": "Free online quadratic equation solver supporting standard form (ax¬≤+bx+c=0), vertex form (a(x-h)¬≤+k=0), factored form (a(x-r‚ÇÅ)(x-r‚ÇÇ)=0), and quadratic inequalities. Step-by-step solutions with discriminant analysis, graphing, and interval notation.",
    "url": "https://8gwifi.org/quadratic-solver.jsp",
    "featureList": [
      "Standard form solver (ax¬≤+bx+c=0)",
      "Vertex form input (a(x-h)¬≤+k=0)",
      "Factored form input (a(x-r‚ÇÅ)(x-r‚ÇÇ)=0)",
      "Quadratic inequality solver (>, <, ‚â•, ‚â§)",
      "Quadratic formula method",
      "Completing the square",
      "Factoring method",
      "Interval notation for inequalities",
      "Sign chart analysis",
      "Discriminant analysis",
      "Vertex form conversion",
      "Graphical visualization",
      "Real and complex roots",
      "Step-by-step solutions",
      "Interactive parabola graph"
    ],
    "screenshot": "https://8gwifi.org/images/quadratic-solver-screenshot.png",
    "softwareVersion": "1.0",
    "datePublished": "2025-11-17",
    "dateModified": "2025-11-17",
    "author": {
      "@type": "Organization",
      "name": "8gwifi.org",
      "url": "https://8gwifi.org"
    }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "HowTo",
    "name": "How to Solve Quadratic Equations Online",
    "description": "Step-by-step guide to solving quadratic equations in multiple forms using our free online calculator.",
    "step": [
      {
        "@type": "HowToStep",
        "position": 1,
        "name": "Select Equation Form",
        "text": "Choose from standard form (ax¬≤+bx+c=0), vertex form (a(x-h)¬≤+k=0), factored form (a(x-r‚ÇÅ)(x-r‚ÇÇ)=0), or inequality (ax¬≤+bx+c ‚â∑ 0).",
        "url": "https://8gwifi.org/quadratic-solver.jsp#step1"
      },
      {
        "@type": "HowToStep",
        "position": 2,
        "name": "Enter Values",
        "text": "Input the coefficients or parameters for your chosen form. Supports integers, decimals, and fractions.",
        "url": "https://8gwifi.org/quadratic-solver.jsp#step2"
      },
      {
        "@type": "HowToStep",
        "position": 3,
        "name": "Choose Solution Method",
        "text": "For equations, select from quadratic formula, completing the square, factoring, or view all methods. Inequalities show interval notation automatically.",
        "url": "https://8gwifi.org/quadratic-solver.jsp#step3"
      },
      {
        "@type": "HowToStep",
        "position": 4,
        "name": "View Solutions",
        "text": "Get detailed step-by-step solutions with discriminant analysis, root calculations, interval notation (for inequalities), and vertex form.",
        "url": "https://8gwifi.org/quadratic-solver.jsp#step4"
      },
      {
        "@type": "HowToStep",
        "position": 5,
        "name": "Visualize Parabola",
        "text": "View the interactive graph showing the parabola, roots, vertex, and axis of symmetry with clear visual markers.",
        "url": "https://8gwifi.org/quadratic-solver.jsp#step5"
      }
    ],
    "totalTime": "PT1M"
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is the quadratic formula?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The quadratic formula is x = (-b ¬± ‚àö(b¬≤-4ac)) / 2a. It solves any quadratic equation ax¬≤+bx+c=0 by calculating the discriminant Œî = b¬≤-4ac and using it to find both roots."
        }
      },
      {
        "@type": "Question",
        "name": "What does the discriminant tell us?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The discriminant Œî = b¬≤-4ac determines the nature of roots: (1) Œî > 0: two distinct real roots, (2) Œî = 0: one repeated real root, (3) Œî < 0: two complex conjugate roots."
        }
      },
      {
        "@type": "Question",
        "name": "How do I convert to vertex form?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Vertex form is y = a(x-h)¬≤+k where (h,k) is the vertex. Calculate h = -b/2a and k = f(h). This form clearly shows the vertex coordinates and whether the parabola opens up (a>0) or down (a<0)."
        }
      },
      {
        "@type": "Question",
        "name": "Can this solver handle complex roots?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! When the discriminant is negative (b¬≤-4ac < 0), the solver calculates complex roots in the form x = p ¬± qi where p is the real part and q is the imaginary part."
        }
      },
      {
        "@type": "Question",
        "name": "How do I use vertex form input?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Select 'Vertex Form' from the equation type dropdown. Enter a (leading coefficient), h (x-coordinate of vertex), and k (y-coordinate of vertex). The solver automatically converts a(x-h)¬≤+k=0 to standard form and solves it."
        }
      },
      {
        "@type": "Question",
        "name": "What is factored form and when do I use it?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Factored form is a(x-r‚ÇÅ)(x-r‚ÇÇ)=0 where r‚ÇÅ and r‚ÇÇ are the roots. Use this when you already know the roots and want to find the standard form or verify solutions. Enter a (coefficient) and the two roots r‚ÇÅ and r‚ÇÇ."
        }
      },
      {
        "@type": "Question",
        "name": "How do quadratic inequalities work?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Select 'Quadratic Inequality' and choose an operator (>, <, ‚â•, ‚â§). The solver finds the roots, creates a sign chart, and provides the solution in interval notation. For example, x¬≤-5x+6 < 0 gives the solution x ‚àà (2, 3)."
        }
      }
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://8gwifi.org/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Math Tools",
        "item": "https://8gwifi.org/math-tools"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "Quadratic Equation Solver",
        "item": "https://8gwifi.org/quadratic-solver.jsp"
      }
    ]
  }
  </script>

  <%@ include file="header-script.jsp"%>
  <script>
    window.MathJax = {
      loader: { load: ['[tex]/color'] },
      tex: {
        packages: { '[+]': ['color'] },
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      startup: {
        ready: () => {
          MathJax.startup.defaultReady();
        }
      }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    .quad-solver .card-header{padding:.6rem .9rem;font-weight:600}
    .quad-solver .card-body{padding:.7rem .9rem}
    .quad-solver .result-card{
      border-left:4px solid #10b981;
      background:linear-gradient(135deg, #ecfdf5 0%, #f0fdf4 100%);
      border-radius:8px;
      padding:1.25rem;
      margin:1rem 0;
      box-shadow:0 2px 8px rgba(16,185,129,0.1)
    }
    .quad-solver .warning-card{
      border-left:4px solid #f59e0b;
      background:linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
      border-radius:8px;
      padding:1.25rem;
      margin:1rem 0;
      box-shadow:0 2px 8px rgba(245,158,11,0.1)
    }
    .quad-solver .info-card{
      border-left:4px solid #3b82f6;
      background:linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
      border-radius:8px;
      padding:1.25rem;
      margin:1rem 0;
      box-shadow:0 2px 8px rgba(59,130,246,0.1)
    }
    .quad-solver .step-card{
      border-left:4px solid #6366f1;
      background:linear-gradient(135deg, #faf5ff 0%, #f5f3ff 100%);
      padding:1rem 1.25rem;
      margin:0.75rem 0;
      border-radius:8px;
      box-shadow:0 1px 3px rgba(99,102,241,0.08);
      transition:all 0.2s ease;
    }
    .quad-solver .step-card:hover{
      box-shadow:0 4px 12px rgba(99,102,241,0.15);
      transform:translateX(2px);
    }
    .step-number{
      display:inline-block;
      background:#6366f1;
      color:white;
      padding:0.2rem 0.6rem;
      border-radius:12px;
      font-size:0.85rem;
      font-weight:600;
      margin-right:0.5rem;
    }
    .root-badge{
      display:inline-flex;
      align-items:center;
      padding:0.4rem 1rem;
      border-radius:999px;
      font-size:1rem;
      margin:0.5rem;
      font-weight:600;
      background:#10b981;
      color:white;
      box-shadow:0 2px 8px rgba(16,185,129,0.2);
    }
    .method-btn{
      margin:0.25rem;
      border-radius:20px;
      padding:0.4rem 1rem;
      font-size:0.9rem;
      border:2px solid #6366f1;
      background:white;
      color:#6366f1;
      transition:all 0.2s;
    }
    .method-btn:hover, .method-btn.active{
      background:#6366f1;
      color:white;
      transform:translateY(-2px);
      box-shadow:0 4px 12px rgba(99,102,241,0.3);
    }
    .coeff-input{
      width:100%;
      padding:0.5rem;
      border:2px solid #e0e7ff;
      border-radius:8px;
      font-size:1.1rem;
      text-align:center;
      font-weight:500;
      transition:all 0.2s;
    }
    .coeff-input:focus{
      outline:none;
      border-color:#6366f1;
      box-shadow:0 0 0 3px rgba(99,102,241,0.1);
    }
    .equation-display{
      text-align:center;
      font-size:1.5rem;
      font-weight:600;
      color:#4b5563;
      padding:1rem;
      background:linear-gradient(135deg, #faf5ff 0%, #f5f3ff 100%);
      border-radius:10px;
      margin:1rem 0;
      border:2px solid #e0e7ff;
    }
    .vertex-info{
      background:white;
      padding:1rem;
      border-radius:8px;
      border:2px solid #e0e7ff;
      margin:0.5rem 0;
    }
    @media (max-width: 767px) {
      .quad-solver h1{font-size:1.5rem}
      .quad-solver .method-btn{width:100%;margin:0.25rem 0}
      .equation-display{font-size:1.2rem}
    }
  </style>
</head>
<%@ include file="body-script.jsp"%>
<%@ include file="math-menu-nav.jsp"%>
<div class="container mt-4 quad-solver">
  <h1 class="mb-2">Quadratic Equation Solver (ax¬≤ + bx + c = 0)</h1>
  <p class="text-muted mb-3">Solve quadratic equations with step-by-step solutions and parabola visualization.</p>

  <div class="row">
    <div class="col-lg-4 col-md-12">
      <div class="card mb-3">
        <h5 class="card-header"><i class="fas fa-superscript"></i> Equation Input</h5>
        <div class="card-body">
          <div class="form-group mb-3">
            <label for="equationType"><strong>Equation Form</strong></label>
            <select id="equationType" class="form-control" onchange="changeEquationType()">
              <option value="standard">Standard Form: ax¬≤ + bx + c = 0</option>
              <option value="vertex">Vertex Form: a(x - h)¬≤ + k = 0</option>
              <option value="factored">Factored Form: a(x - r‚ÇÅ)(x - r‚ÇÇ) = 0</option>
              <option value="inequality">Quadratic Inequality: ax¬≤ + bx + c ‚â∑ 0</option>
            </select>
            <small class="text-muted">Choose the form of your equation</small>
          </div>

          <div id="standardForm">
            <div class="form-group mb-3">
              <label for="coeffA"><strong>a</strong> (coefficient of x¬≤)</label>
              <input type="number" id="coeffA" class="coeff-input" value="1" step="any">
              <small class="text-muted">Must be non-zero</small>
            </div>
            <div class="form-group mb-3">
              <label for="coeffB"><strong>b</strong> (coefficient of x)</label>
              <input type="number" id="coeffB" class="coeff-input" value="5" step="any">
            </div>
            <div class="form-group mb-3">
              <label for="coeffC"><strong>c</strong> (constant term)</label>
              <input type="number" id="coeffC" class="coeff-input" value="6" step="any">
            </div>
          </div>

          <div id="vertexForm" style="display:none;">
            <div class="form-group mb-3">
              <label for="vertexA"><strong>a</strong> (leading coefficient)</label>
              <input type="number" id="vertexA" class="coeff-input" value="1" step="any">
            </div>
            <div class="form-group mb-3">
              <label for="vertexH"><strong>h</strong> (x-coordinate of vertex)</label>
              <input type="number" id="vertexH" class="coeff-input" value="-2" step="any">
            </div>
            <div class="form-group mb-3">
              <label for="vertexK"><strong>k</strong> (y-coordinate of vertex)</label>
              <input type="number" id="vertexK" class="coeff-input" value="-1" step="any">
            </div>
          </div>

          <div id="factoredForm" style="display:none;">
            <div class="form-group mb-3">
              <label for="factorA"><strong>a</strong> (leading coefficient)</label>
              <input type="number" id="factorA" class="coeff-input" value="1" step="any">
            </div>
            <div class="form-group mb-3">
              <label for="factorR1"><strong>r‚ÇÅ</strong> (first root)</label>
              <input type="number" id="factorR1" class="coeff-input" value="-2" step="any">
            </div>
            <div class="form-group mb-3">
              <label for="factorR2"><strong>r‚ÇÇ</strong> (second root)</label>
              <input type="number" id="factorR2" class="coeff-input" value="-3" step="any">
            </div>
          </div>

          <div id="inequalityForm" style="display:none;">
            <div class="form-group mb-3">
              <label for="ineqA"><strong>a</strong> (coefficient of x¬≤)</label>
              <input type="number" id="ineqA" class="coeff-input" value="1" step="any">
            </div>
            <div class="form-group mb-3">
              <label for="ineqB"><strong>b</strong> (coefficient of x)</label>
              <input type="number" id="ineqB" class="coeff-input" value="5" step="any">
            </div>
            <div class="form-group mb-3">
              <label for="ineqC"><strong>c</strong> (constant term)</label>
              <input type="number" id="ineqC" class="coeff-input" value="6" step="any">
            </div>
            <div class="form-group mb-3">
              <label for="ineqOperator"><strong>Inequality Operator</strong></label>
              <select id="ineqOperator" class="form-control">
                <option value=">">Greater than (>)</option>
                <option value="<">Less than (<)</option>
                <option value=">=">Greater than or equal (‚â•)</option>
                <option value="<=">Less than or equal (‚â§)</option>
              </select>
            </div>
          </div>

          <div class="equation-display" id="equationDisplay">
            <span id="equationText">x¬≤ + 5x + 6 = 0</span>
          </div>

          <button class="btn btn-primary btn-block mt-3" onclick="solveQuadratic()">
            <i class="fas fa-calculator"></i> Solve Equation
          </button>
          <button class="btn btn-secondary btn-block mt-2" onclick="loadExample()">
            <i class="fas fa-dice"></i> Random Example
          </button>
          <button class="btn btn-outline-secondary btn-block mt-2" onclick="clearAll()">
            <i class="fas fa-eraser"></i> Clear
          </button>
          <button class="btn btn-outline-primary btn-block mt-2" onclick="shareURL()">
            <i class="fas fa-share-alt"></i> Share URL
          </button>
        </div>
      </div>

      <div class="card mb-3">
        <h5 class="card-header"><i class="fas fa-list-check"></i> Solution Methods</h5>
        <div class="card-body">
          <button class="method-btn active" data-method="all" onclick="selectMethod('all')">
            <i class="fas fa-check-double"></i> Show All Methods
          </button>
          <button class="method-btn" data-method="formula" onclick="selectMethod('formula')">
            <i class="fas fa-square-root-alt"></i> Quadratic Formula
          </button>
          <button class="method-btn" data-method="complete" onclick="selectMethod('complete')">
            <i class="fas fa-equals"></i> Completing Square
          </button>
          <button class="method-btn" data-method="factor" onclick="selectMethod('factor')">
            <i class="fas fa-th-large"></i> Factoring
          </button>
        </div>
      </div>
    </div>

    <div class="col-lg-8 col-md-12">
      <div id="results"></div>
      <div id="graphContainer" style="display:none;">
        <div class="card">
          <h5 class="card-header"><i class="fas fa-chart-line"></i> Parabola Visualization</h5>
          <div class="card-body">
            <canvas id="parabolaChart" height="400"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<%@ include file="footer_adsense.jsp"%>
<%@ include file="addStatsCounter.jsp"%>

<script>
let currentMethod = 'all';
let chartInstance = null;

function selectMethod(method) {
  currentMethod = method;
  document.querySelectorAll('.method-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  document.querySelector(`[data-method="${method}"]`).classList.add('active');

  // Re-solve if there are existing results
  if (document.getElementById('results').innerHTML) {
    solveQuadratic();
  }
}

function updateEquationDisplay() {
  const type = document.getElementById('equationType').value;
  let eq = '';

  if (type === 'standard') {
    const a = parseFloat(document.getElementById('coeffA').value) || 0;
    const b = parseFloat(document.getElementById('coeffB').value) || 0;
    const c = parseFloat(document.getElementById('coeffC').value) || 0;
    eq = buildStandardEquation(a, b, c) + ' = 0';
  } else if (type === 'vertex') {
    const a = parseFloat(document.getElementById('vertexA').value) || 0;
    const h = parseFloat(document.getElementById('vertexH').value) || 0;
    const k = parseFloat(document.getElementById('vertexK').value) || 0;
    const aStr = a === 1 ? '' : (a === -1 ? '-' : a);
    const hStr = h >= 0 ? `x - ${h}` : `x + ${Math.abs(h)}`;
    const kStr = k >= 0 ? `+ ${k}` : `- ${Math.abs(k)}`;
    eq = `${aStr}(${hStr})¬≤ ${kStr} = 0`;
  } else if (type === 'factored') {
    const a = parseFloat(document.getElementById('factorA').value) || 0;
    const r1 = parseFloat(document.getElementById('factorR1').value) || 0;
    const r2 = parseFloat(document.getElementById('factorR2').value) || 0;
    const aStr = a === 1 ? '' : (a === -1 ? '-' : a);
    const r1Str = r1 >= 0 ? `x - ${r1}` : `x + ${Math.abs(r1)}`;
    const r2Str = r2 >= 0 ? `x - ${r2}` : `x + ${Math.abs(r2)}`;
    eq = `${aStr}(${r1Str})(${r2Str}) = 0`;
  } else if (type === 'inequality') {
    const a = parseFloat(document.getElementById('ineqA').value) || 0;
    const b = parseFloat(document.getElementById('ineqB').value) || 0;
    const c = parseFloat(document.getElementById('ineqC').value) || 0;
    const op = document.getElementById('ineqOperator').value;
    const opSymbol = op === '>=' ? '‚â•' : (op === '<=' ? '‚â§' : op);
    eq = buildStandardEquation(a, b, c) + ' ' + opSymbol + ' 0';
  }

  document.getElementById('equationText').textContent = eq;
}

function buildStandardEquation(a, b, c) {
  let eq = '';
  // x¬≤ term
  if (a === 1) eq += 'x¬≤';
  else if (a === -1) eq += '-x¬≤';
  else if (a !== 0) eq += a + 'x¬≤';

  // x term
  if (b !== 0) {
    if (eq && b > 0) eq += ' + ';
    if (eq && b < 0) eq += ' - ';
    if (!eq && b < 0) eq += '-';

    const absB = Math.abs(b);
    if (absB === 1) eq += 'x';
    else eq += absB + 'x';
  }

  // constant term
  if (c !== 0) {
    if (eq && c > 0) eq += ' + ';
    if (eq && c < 0) eq += ' - ';
    if (!eq && c < 0) eq += '-';
    eq += Math.abs(c);
  }

  if (!eq) eq = '0';
  return eq;
}

document.getElementById('coeffA').addEventListener('input', updateEquationDisplay);
document.getElementById('coeffB').addEventListener('input', updateEquationDisplay);
document.getElementById('coeffC').addEventListener('input', updateEquationDisplay);

function solveQuadratic() {
  const coeffData = getCoefficients();
  const a = coeffData.a;
  const b = coeffData.b;
  const c = coeffData.c;
  const type = coeffData.type;

  if (!a || a === 0) {
    document.getElementById('results').innerHTML = `
      <div class="warning-card">
        <i class="fas fa-exclamation-triangle"></i> <strong>Invalid Input</strong><br>
        Coefficient 'a' must be non-zero for a quadratic equation.
      </div>`;
    return;
  }

  const discriminant = b*b - 4*a*c;

  let html = '';

  // Show input form info for non-standard forms
  if (type === 'vertex') {
    const av = parseFloat(document.getElementById('vertexA').value);
    const h = parseFloat(document.getElementById('vertexH').value);
    const k = parseFloat(document.getElementById('vertexK').value);
    html += `<div class="info-card">
      <h5><i class="fas fa-info-circle"></i> Input Form</h5>
      <p><strong>Vertex Form:</strong> $${formatCoeff(av)}(x ${h >= 0 ? '-' : '+'} ${Math.abs(h)})^2 ${k >= 0 ? '+' : '-'} ${Math.abs(k)} = 0$</p>
      <p><strong>Converted to Standard:</strong> $${formatCoeff(a)}x^2 ${formatTerm(b, 'x')} ${formatTerm(c, '')} = 0$</p>
    </div>`;
  } else if (type === 'factored') {
    const af = parseFloat(document.getElementById('factorA').value);
    const r1 = parseFloat(document.getElementById('factorR1').value);
    const r2 = parseFloat(document.getElementById('factorR2').value);
    html += `<div class="info-card">
      <h5><i class="fas fa-info-circle"></i> Input Form</h5>
      <p><strong>Factored Form:</strong> $${formatCoeff(af)}(x ${r1 >= 0 ? '-' : '+'} ${Math.abs(r1)})(x ${r2 >= 0 ? '-' : '+'} ${Math.abs(r2)}) = 0$</p>
      <p><strong>Converted to Standard:</strong> $${formatCoeff(a)}x^2 ${formatTerm(b, 'x')} ${formatTerm(c, '')} = 0$</p>
      <p><strong>Roots directly visible:</strong> $x_1 = ${r1.toFixed(4)}, x_2 = ${r2.toFixed(4)}$</p>
    </div>`;
  }

  // Discriminant info
  html += `
    <div class="info-card">
      <h5><i class="fas fa-info-circle"></i> Equation Analysis</h5>
      <p><strong>Standard Form:</strong> $${formatCoeff(a)}x^2 ${formatTerm(b, 'x')} ${formatTerm(c, '')} = 0$</p>
      <p><strong>Discriminant:</strong> $\\Delta = b^2 - 4ac = ${b}^2 - 4(${a})(${c}) = ${discriminant.toFixed(4)}$</p>
      <p><strong>Nature of Roots:</strong> ${getRootNature(discriminant)}</p>
    </div>`;

  // Calculate roots
  const roots = calculateRoots(a, b, c, discriminant);

  // Handle inequality
  if (type === 'inequality') {
    const operator = document.getElementById('ineqOperator').value;
    html += solveInequality(a, b, c, roots, operator);
  } else {
    // Show selected methods for equations
    if (currentMethod === 'all' || currentMethod === 'formula') {
      html += solveByFormula(a, b, c, discriminant, roots);
    }
    if (currentMethod === 'all' || currentMethod === 'complete') {
      html += solveByCompletingSquare(a, b, c, roots);
    }
    if (currentMethod === 'all' || currentMethod === 'factor') {
      html += solveByFactoring(a, b, c, roots, discriminant);
    }

    // Vertex form and properties
    html += getVertexForm(a, b, c);
  }

  document.getElementById('results').innerHTML = html;

  // Typeset MathJax
  if (window.MathJax) {
    MathJax.typesetPromise([document.getElementById('results')]).catch((err) => console.log(err));
  }

  // Draw graph
  drawParabola(a, b, c, roots);
}

function formatCoeff(val) {
  if (val === 1) return '';
  if (val === -1) return '-';
  return val;
}

function formatTerm(coeff, variable) {
  if (coeff === 0) return '';
  const sign = coeff > 0 ? '+' : '-';
  const absVal = Math.abs(coeff);
  const coeffStr = absVal === 1 && variable ? '' : absVal;
  return `${sign} ${coeffStr}${variable}`;
}

function getRootNature(disc) {
  if (disc > 0) return '<span class="text-success"><i class="fas fa-check-circle"></i> Two distinct real roots</span>';
  if (disc === 0) return '<span class="text-info"><i class="fas fa-info-circle"></i> One repeated real root (double root)</span>';
  return '<span class="text-warning"><i class="fas fa-times-circle"></i> Two complex conjugate roots</span>';
}

function calculateRoots(a, b, c, disc) {
  if (disc >= 0) {
    const sqrtDisc = Math.sqrt(disc);
    const x1 = (-b + sqrtDisc) / (2*a);
    const x2 = (-b - sqrtDisc) / (2*a);
    return { type: 'real', x1, x2 };
  } else {
    const realPart = -b / (2*a);
    const imagPart = Math.sqrt(-disc) / (2*a);
    return { type: 'complex', real: realPart, imag: imagPart };
  }
}

function solveByFormula(a, b, c, disc, roots) {
  let html = `
    <div class="card mb-3">
      <h5 class="card-header bg-primary text-white">
        <i class="fas fa-square-root-alt"></i> Method 1: Quadratic Formula
      </h5>
      <div class="card-body">
        <div class="step-card">
          <span class="step-number">1</span>
          <div class="step-description">
            <strong>Apply the quadratic formula:</strong><br>
            $$x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}$$
          </div>
        </div>

        <div class="step-card">
          <span class="step-number">2</span>
          <div class="step-description">
            <strong>Substitute values:</strong> $a = ${a}, b = ${b}, c = ${c}$<br>
            $$x = \\frac{-(${b}) \\pm \\sqrt{(${b})^2 - 4(${a})(${c})}}{2(${a})}$$
          </div>
        </div>

        <div class="step-card">
          <span class="step-number">3</span>
          <div class="step-description">
            <strong>Calculate discriminant:</strong><br>
            $$\\Delta = ${b}^2 - 4(${a})(${c}) = ${b*b} - ${4*a*c} = ${disc.toFixed(4)}$$
          </div>
        </div>

        <div class="step-card">
          <span class="step-number">4</span>
          <div class="step-description">
            <strong>Calculate roots:</strong><br>`;

  if (roots.type === 'real') {
    if (disc > 0) {
      html += `$$x = \\frac{${-b} \\pm ${Math.sqrt(disc).toFixed(4)}}{${2*a}}$$<br>`;
      html += `$$x_1 = \\frac{${-b} + ${Math.sqrt(disc).toFixed(4)}}{${2*a}} = ${roots.x1.toFixed(4)}$$<br>`;
      html += `$$x_2 = \\frac{${-b} - ${Math.sqrt(disc).toFixed(4)}}{${2*a}} = ${roots.x2.toFixed(4)}$$`;
    } else {
      html += `$$x = \\frac{${-b}}{${2*a}} = ${roots.x1.toFixed(4)}$$`;
    }
  } else {
    html += `$$x = \\frac{${-b} \\pm \\sqrt{${disc.toFixed(4)}}}{${2*a}}$$<br>`;
    html += `$$x = \\frac{${-b} \\pm ${Math.sqrt(-disc).toFixed(4)}i}{${2*a}}$$<br>`;
    html += `$$x = ${roots.real.toFixed(4)} \\pm ${roots.imag.toFixed(4)}i$$`;
  }

  html += `</div></div>`;

  // Solution
  html += `<div class="result-card">
    <h6><i class="fas fa-check-circle"></i> Solution:</h6>`;
  if (roots.type === 'real') {
    if (disc > 0) {
      html += `<div class="root-badge">x‚ÇÅ = ${roots.x1.toFixed(4)}</div>
               <div class="root-badge">x‚ÇÇ = ${roots.x2.toFixed(4)}</div>`;
    } else {
      html += `<div class="root-badge">x = ${roots.x1.toFixed(4)}</div>`;
    }
  } else {
    html += `<div class="root-badge">x‚ÇÅ = ${roots.real.toFixed(4)} + ${roots.imag.toFixed(4)}i</div>
             <div class="root-badge">x‚ÇÇ = ${roots.real.toFixed(4)} - ${roots.imag.toFixed(4)}i</div>`;
  }
  html += `</div></div></div>`;

  return html;
}

function solveByCompletingSquare(a, b, c, roots) {
  const h = -b / (2*a);
  const k = c - b*b/(4*a);

  let html = `
    <div class="card mb-3">
      <h5 class="card-header bg-success text-white">
        <i class="fas fa-equals"></i> Method 2: Completing the Square
      </h5>
      <div class="card-body">
        <div class="step-card">
          <span class="step-number">1</span>
          <div class="step-description">
            <strong>Start with:</strong> $${formatCoeff(a)}x^2 ${formatTerm(b, 'x')} ${formatTerm(c, '')} = 0$
          </div>
        </div>

        <div class="step-card">
          <span class="step-number">2</span>
          <div class="step-description">
            <strong>Divide by a:</strong> $x^2 ${formatTerm(b/a, 'x')} ${formatTerm(c/a, '')} = 0$
          </div>
        </div>

        <div class="step-card">
          <span class="step-number">3</span>
          <div class="step-description">
            <strong>Move constant to right:</strong> $x^2 ${formatTerm(b/a, 'x')} = ${(-c/a).toFixed(4)}$
          </div>
        </div>

        <div class="step-card">
          <span class="step-number">4</span>
          <div class="step-description">
            <strong>Complete the square:</strong> Add $(\\frac{b}{2a})^2 = (\\frac{${b}}{${2*a}})^2 = ${(b/(2*a))**2}$ to both sides<br>
            $$x^2 ${formatTerm(b/a, 'x')} + ${((b/(2*a))**2).toFixed(4)} = ${(-c/a + (b/(2*a))**2).toFixed(4)}$$
          </div>
        </div>

        <div class="step-card">
          <span class="step-number">5</span>
          <div class="step-description">
            <strong>Factor left side:</strong><br>
            $$(x ${h >= 0 ? '-' : '+'} ${Math.abs(h).toFixed(4)})^2 = ${(-k/a).toFixed(4)}$$
          </div>
        </div>

        <div class="step-card">
          <span class="step-number">6</span>
          <div class="step-description">
            <strong>Take square root:</strong><br>`;

  if (roots.type === 'real') {
    html += `$$x ${h >= 0 ? '-' : '+'} ${Math.abs(h).toFixed(4)} = \\pm ${Math.sqrt(Math.abs(-k/a)).toFixed(4)}$$<br>`;
    html += `$$x = ${h.toFixed(4)} \\pm ${Math.sqrt(Math.abs(-k/a)).toFixed(4)}$$`;
  } else {
    html += `$$x ${h >= 0 ? '-' : '+'} ${Math.abs(h).toFixed(4)} = \\pm ${Math.sqrt(Math.abs(-k/a)).toFixed(4)}i$$<br>`;
    html += `$$x = ${roots.real.toFixed(4)} \\pm ${roots.imag.toFixed(4)}i$$`;
  }

  html += `</div></div></div></div>`;
  return html;
}

function solveByFactoring(a, b, c, roots, disc) {
  let html = `
    <div class="card mb-3">
      <h5 class="card-header bg-info text-white">
        <i class="fas fa-th-large"></i> Method 3: Factoring
      </h5>
      <div class="card-body">`;

  if (roots.type === 'real' && disc >= 0) {
    const r1 = roots.x1;
    const r2 = roots.x2;

    // Check if roots are rational
    const isRational = (num) => Math.abs(num - Math.round(num)) < 0.0001;

    if (isRational(r1) && isRational(r2)) {
      html += `
        <div class="step-card">
          <span class="step-number">1</span>
          <div class="step-description">
            <strong>The equation can be factored!</strong><br>
            Since roots are $x = ${r1.toFixed(0)}$ and $x = ${r2.toFixed(0)}$
          </div>
        </div>

        <div class="step-card">
          <span class="step-number">2</span>
          <div class="step-description">
            <strong>Write as factors:</strong><br>
            $$${formatCoeff(a)}(x - ${r1.toFixed(0)})(x - ${r2.toFixed(0)}) = 0$$
          </div>
        </div>

        <div class="step-card">
          <span class="step-number">3</span>
          <div class="step-description">
            <strong>Solutions:</strong> $x = ${r1.toFixed(0)}$ or $x = ${r2.toFixed(0)}$
          </div>
        </div>`;
    } else {
      html += `
        <div class="warning-card">
          <i class="fas fa-info-circle"></i> This equation does not factor nicely over the integers.<br>
          The roots are irrational: $x_1 = ${r1.toFixed(4)}$, $x_2 = ${r2.toFixed(4)}$<br>
          Use the quadratic formula or completing the square instead.
        </div>`;
    }
  } else {
    html += `
      <div class="warning-card">
        <i class="fas fa-times-circle"></i> This equation has complex roots and cannot be factored over the real numbers.<br>
        Use the quadratic formula or completing the square instead.
      </div>`;
  }

  html += `</div></div>`;
  return html;
}

function getVertexForm(a, b, c) {
  const h = -b / (2*a);
  const k = c - b*b/(4*a);
  const axis = h;
  const yIntercept = c;
  const opensUp = a > 0;

  return `
    <div class="card mb-3">
      <h5 class="card-header bg-secondary text-white">
        <i class="fas fa-chart-line"></i> Parabola Properties
      </h5>
      <div class="card-body">
        <div class="vertex-info">
          <strong>Vertex Form:</strong> $y = ${formatCoeff(a)}(x ${h >= 0 ? '-' : '+'} ${Math.abs(h).toFixed(4)})^2 ${k >= 0 ? '+' : '-'} ${Math.abs(k).toFixed(4)}$
        </div>
        <div class="vertex-info">
          <strong>Vertex:</strong> $(${h.toFixed(4)}, ${k.toFixed(4)})$
        </div>
        <div class="vertex-info">
          <strong>Axis of Symmetry:</strong> $x = ${axis.toFixed(4)}$
        </div>
        <div class="vertex-info">
          <strong>Y-intercept:</strong> $(0, ${yIntercept})$
        </div>
        <div class="vertex-info">
          <strong>Direction:</strong> Opens ${opensUp ? 'upward ‚¨Ü' : 'downward ‚¨á'} (${opensUp ? 'minimum' : 'maximum'} at vertex)
        </div>
        <div class="vertex-info">
          <strong>Concavity:</strong> ${a > 0 ? 'Concave up (smiles üòä)' : 'Concave down (frowns ‚òπÔ∏è)'}
        </div>
      </div>
    </div>`;
}

function drawParabola(a, b, c, roots) {
  const container = document.getElementById('graphContainer');
  container.style.display = 'block';

  const h = -b / (2*a);
  const k = c - b*b/(4*a);

  // Generate points for parabola
  const xMin = h - 10;
  const xMax = h + 10;
  const points = [];
  const step = (xMax - xMin) / 200;

  for (let x = xMin; x <= xMax; x += step) {
    const y = a*x*x + b*x + c;
    points.push({x, y});
  }

  // Prepare datasets
  const datasets = [{
    label: 'y = ' + formatEquation(a, b, c),
    data: points,
    borderColor: '#6366f1',
    backgroundColor: 'rgba(99, 102, 241, 0.1)',
    borderWidth: 3,
    fill: true,
    pointRadius: 0,
    tension: 0.4
  }];

  // Add vertex point
  datasets.push({
    label: 'Vertex',
    data: [{x: h, y: k}],
    borderColor: '#10b981',
    backgroundColor: '#10b981',
    pointRadius: 8,
    pointHoverRadius: 10,
    showLine: false
  });

  // Add roots if real
  if (roots.type === 'real') {
    const rootPoints = [];
    if (roots.x1 !== roots.x2) {
      rootPoints.push({x: roots.x1, y: 0}, {x: roots.x2, y: 0});
    } else {
      rootPoints.push({x: roots.x1, y: 0});
    }
    datasets.push({
      label: 'Roots',
      data: rootPoints,
      borderColor: '#ef4444',
      backgroundColor: '#ef4444',
      pointRadius: 8,
      pointHoverRadius: 10,
      showLine: false
    });
  }

  // Add y-intercept
  datasets.push({
    label: 'Y-intercept',
    data: [{x: 0, y: c}],
    borderColor: '#f59e0b',
    backgroundColor: '#f59e0b',
    pointRadius: 8,
    pointHoverRadius: 10,
    showLine: false
  });

  if (chartInstance) {
    chartInstance.destroy();
  }

  const ctx = document.getElementById('parabolaChart').getContext('2d');
  chartInstance = new Chart(ctx, {
    type: 'scatter',
    data: { datasets },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      aspectRatio: 1.5,
      plugins: {
        legend: {
          display: true,
          position: 'top'
        },
        tooltip: {
          callbacks: {
            label: function(context) {
              return `(${context.parsed.x.toFixed(2)}, ${context.parsed.y.toFixed(2)})`;
            }
          }
        }
      },
      scales: {
        x: {
          type: 'linear',
          title: { display: true, text: 'x', font: { size: 14, weight: 'bold' } },
          grid: { color: '#e5e7eb' }
        },
        y: {
          type: 'linear',
          title: { display: true, text: 'y', font: { size: 14, weight: 'bold' } },
          grid: { color: '#e5e7eb' }
        }
      }
    }
  });
}

function formatEquation(a, b, c) {
  let eq = '';
  if (a !== 0) eq += (a === 1 ? '' : (a === -1 ? '-' : a)) + 'x¬≤';
  if (b !== 0) {
    if (eq && b > 0) eq += ' + ';
    if (eq && b < 0) eq += ' - ';
    if (!eq && b < 0) eq += '-';
    const absB = Math.abs(b);
    eq += (absB === 1 ? '' : absB) + 'x';
  }
  if (c !== 0) {
    if (eq && c > 0) eq += ' + ';
    if (eq && c < 0) eq += ' - ';
    eq += Math.abs(c);
  }
  return eq || '0';
}

function solveInequality(a, b, c, roots, operator) {
  let html = `<div class="card mb-3">
    <h5 class="card-header bg-warning text-white">
      <i class="fas fa-less-than-equal"></i> Quadratic Inequality Solution
    </h5>
    <div class="card-body">`;

  if (roots.type === 'complex') {
    // Complex roots - no real solutions or all solutions
    if ((a > 0 && (operator === '>' || operator === '>=')) ||
        (a < 0 && (operator === '<' || operator === '<='))) {
      html += `<div class="result-card">
        <h6><i class="fas fa-infinity"></i> Solution:</h6>
        <p>Since the parabola has no real roots and opens ${a > 0 ? 'upward' : 'downward'},
        the inequality is satisfied for <strong>all real numbers</strong>.</p>
        <div class="root-badge">x ‚àà ‚Ñù (all real numbers)</div>
      </div>`;
    } else {
      html += `<div class="warning-card">
        <h6><i class="fas fa-times-circle"></i> No Solution:</h6>
        <p>The parabola has no real roots and opens ${a > 0 ? 'upward' : 'downward'},
        so the inequality is <strong>never satisfied</strong>.</p>
        <div class="root-badge">No Solution (‚àÖ)</div>
      </div>`;
    }
  } else {
    const x1 = Math.min(roots.x1, roots.x2);
    const x2 = Math.max(roots.x1, roots.x2);

    html += `<div class="step-card">
      <span class="step-number">1</span>
      <div class="step-description">
        <strong>Find the roots:</strong> $x_1 = ${x1.toFixed(4)}$, $x_2 = ${x2.toFixed(4)}$
      </div>
    </div>`;

    html += `<div class="step-card">
      <span class="step-number">2</span>
      <div class="step-description">
        <strong>Create sign chart:</strong> The parabola ${a > 0 ? 'opens upward' : 'opens downward'}.<br>
        Test intervals: $(-\\infty, ${x1.toFixed(4)})$, $(${x1.toFixed(4)}, ${x2.toFixed(4)})$, $(${x2.toFixed(4)}, +\\infty)$
      </div>
    </div>`;

    let solution = '';
    const opSymbol = operator === '>=' ? '‚â•' : (operator === '<=' ? '‚â§' : operator);

    if (a > 0) {
      // Opens upward
      if (operator === '>') {
        solution = `x < ${x1.toFixed(4)} or x > ${x2.toFixed(4)}`;
        html += `<div class="result-card">
          <h6><i class="fas fa-check-circle"></i> Solution:</h6>
          <p>Parabola is positive (above x-axis) outside the roots.</p>
          <div class="root-badge">x ‚àà (-‚àû, ${x1.toFixed(4)}) ‚à™ (${x2.toFixed(4)}, +‚àû)</div>
        </div>`;
      } else if (operator === '>=') {
        solution = `x ‚â§ ${x1.toFixed(4)} or x ‚â• ${x2.toFixed(4)}`;
        html += `<div class="result-card">
          <h6><i class="fas fa-check-circle"></i> Solution:</h6>
          <p>Parabola is positive or zero outside and at the roots.</p>
          <div class="root-badge">x ‚àà (-‚àû, ${x1.toFixed(4)}] ‚à™ [${x2.toFixed(4)}, +‚àû)</div>
        </div>`;
      } else if (operator === '<') {
        solution = `${x1.toFixed(4)} < x < ${x2.toFixed(4)}`;
        html += `<div class="result-card">
          <h6><i class="fas fa-check-circle"></i> Solution:</h6>
          <p>Parabola is negative (below x-axis) between the roots.</p>
          <div class="root-badge">x ‚àà (${x1.toFixed(4)}, ${x2.toFixed(4)})</div>
        </div>`;
      } else { // <=
        solution = `${x1.toFixed(4)} ‚â§ x ‚â§ ${x2.toFixed(4)}`;
        html += `<div class="result-card">
          <h6><i class="fas fa-check-circle"></i> Solution:</h6>
          <p>Parabola is negative or zero between and at the roots.</p>
          <div class="root-badge">x ‚àà [${x1.toFixed(4)}, ${x2.toFixed(4)}]</div>
        </div>`;
      }
    } else {
      // Opens downward
      if (operator === '>') {
        solution = `${x1.toFixed(4)} < x < ${x2.toFixed(4)}`;
        html += `<div class="result-card">
          <h6><i class="fas fa-check-circle"></i> Solution:</h6>
          <p>Parabola is positive (above x-axis) between the roots.</p>
          <div class="root-badge">x ‚àà (${x1.toFixed(4)}, ${x2.toFixed(4)})</div>
        </div>`;
      } else if (operator === '>=') {
        solution = `${x1.toFixed(4)} ‚â§ x ‚â§ ${x2.toFixed(4)}`;
        html += `<div class="result-card">
          <h6><i class="fas fa-check-circle"></i> Solution:</h6>
          <p>Parabola is positive or zero between and at the roots.</p>
          <div class="root-badge">x ‚àà [${x1.toFixed(4)}, ${x2.toFixed(4)}]</div>
        </div>`;
      } else if (operator === '<') {
        solution = `x < ${x1.toFixed(4)} or x > ${x2.toFixed(4)}`;
        html += `<div class="result-card">
          <h6><i class="fas fa-check-circle"></i> Solution:</h6>
          <p>Parabola is negative (below x-axis) outside the roots.</p>
          <div class="root-badge">x ‚àà (-‚àû, ${x1.toFixed(4)}) ‚à™ (${x2.toFixed(4)}, +‚àû)</div>
        </div>`;
      } else { // <=
        solution = `x ‚â§ ${x1.toFixed(4)} or x ‚â• ${x2.toFixed(4)}`;
        html += `<div class="result-card">
          <h6><i class="fas fa-check-circle"></i> Solution:</h6>
          <p>Parabola is negative or zero outside and at the roots.</p>
          <div class="root-badge">x ‚àà (-‚àû, ${x1.toFixed(4)}] ‚à™ [${x2.toFixed(4)}, +‚àû)</div>
        </div>`;
      }
    }
  }

  html += `</div></div>`;
  return html;
}

function loadExample() {
  const examples = [
    {a: 1, b: 5, c: 6},    // (x+2)(x+3)
    {a: 1, b: -5, c: 6},   // (x-2)(x-3)
    {a: 1, b: 0, c: -16},  // x¬≤-16
    {a: 2, b: 4, c: -6},   // 2(x+3)(x-1)
    {a: 1, b: 2, c: 1},    // (x+1)¬≤
    {a: 1, b: 0, c: 1},    // Complex roots
    {a: -1, b: 4, c: -3},  // Opens down
    {a: 3, b: -12, c: 9}   // 3(x-1)(x-3)
  ];
  const ex = examples[Math.floor(Math.random() * examples.length)];
  document.getElementById('coeffA').value = ex.a;
  document.getElementById('coeffB').value = ex.b;
  document.getElementById('coeffC').value = ex.c;
  updateEquationDisplay();
  solveQuadratic();
}

function clearAll() {
  document.getElementById('coeffA').value = 1;
  document.getElementById('coeffB').value = 0;
  document.getElementById('coeffC').value = 0;
  document.getElementById('results').innerHTML = '';
  document.getElementById('graphContainer').style.display = 'none';
  updateEquationDisplay();
  if (chartInstance) {
    chartInstance.destroy();
    chartInstance = null;
  }
}

function shareURL() {
  const type = document.getElementById('equationType').value;
  const params = new URLSearchParams();
  params.set('type', type);

  if (type === 'standard') {
    params.set('a', document.getElementById('coeffA').value);
    params.set('b', document.getElementById('coeffB').value);
    params.set('c', document.getElementById('coeffC').value);
  } else if (type === 'vertex') {
    params.set('a', document.getElementById('vertexA').value);
    params.set('h', document.getElementById('vertexH').value);
    params.set('k', document.getElementById('vertexK').value);
  } else if (type === 'factored') {
    params.set('a', document.getElementById('factorA').value);
    params.set('r1', document.getElementById('factorR1').value);
    params.set('r2', document.getElementById('factorR2').value);
  } else if (type === 'inequality') {
    params.set('a', document.getElementById('ineqA').value);
    params.set('b', document.getElementById('ineqB').value);
    params.set('c', document.getElementById('ineqC').value);
    params.set('op', document.getElementById('ineqOperator').value);
  }

  const shareableURL = window.location.origin + window.location.pathname + '?' + params.toString();

  // Copy to clipboard
  navigator.clipboard.writeText(shareableURL).then(() => {
    // Show success message
    const btn = event.target.closest('button');
    const originalHTML = btn.innerHTML;
    btn.innerHTML = '<i class="fas fa-check"></i> URL Copied!';
    btn.classList.remove('btn-outline-primary');
    btn.classList.add('btn-success');

    setTimeout(() => {
      btn.innerHTML = originalHTML;
      btn.classList.remove('btn-success');
      btn.classList.add('btn-outline-primary');
    }, 2000);
  }).catch(err => {
    // Fallback: show prompt with URL
    prompt('Copy this URL:', shareableURL);
  });
}

function loadFromURL() {
  const params = new URLSearchParams(window.location.search);

  if (params.has('type')) {
    const type = params.get('type');
    document.getElementById('equationType').value = type;
    changeEquationType();

    if (type === 'standard' && params.has('a')) {
      document.getElementById('coeffA').value = params.get('a') || 1;
      document.getElementById('coeffB').value = params.get('b') || 0;
      document.getElementById('coeffC').value = params.get('c') || 0;
    } else if (type === 'vertex' && params.has('a')) {
      document.getElementById('vertexA').value = params.get('a') || 1;
      document.getElementById('vertexH').value = params.get('h') || 0;
      document.getElementById('vertexK').value = params.get('k') || 0;
    } else if (type === 'factored' && params.has('a')) {
      document.getElementById('factorA').value = params.get('a') || 1;
      document.getElementById('factorR1').value = params.get('r1') || -2;
      document.getElementById('factorR2').value = params.get('r2') || -3;
    } else if (type === 'inequality' && params.has('a')) {
      document.getElementById('ineqA').value = params.get('a') || 1;
      document.getElementById('ineqB').value = params.get('b') || 0;
      document.getElementById('ineqC').value = params.get('c') || 0;
      if (params.has('op')) {
        document.getElementById('ineqOperator').value = params.get('op');
      }
    }

    updateEquationDisplay();
  }
}

// Change equation type
function changeEquationType() {
  const type = document.getElementById('equationType').value;

  // Hide all forms
  document.getElementById('standardForm').style.display = 'none';
  document.getElementById('vertexForm').style.display = 'none';
  document.getElementById('factoredForm').style.display = 'none';
  document.getElementById('inequalityForm').style.display = 'none';

  // Show selected form
  if (type === 'standard') {
    document.getElementById('standardForm').style.display = 'block';
  } else if (type === 'vertex') {
    document.getElementById('vertexForm').style.display = 'block';
  } else if (type === 'factored') {
    document.getElementById('factoredForm').style.display = 'block';
  } else if (type === 'inequality') {
    document.getElementById('inequalityForm').style.display = 'block';
  }

  updateEquationDisplay();

  // Clear results when changing type
  document.getElementById('results').innerHTML = '';
  document.getElementById('graphContainer').style.display = 'none';
}

// Get coefficients based on current equation type
function getCoefficients() {
  const type = document.getElementById('equationType').value;
  let a, b, c;

  if (type === 'standard') {
    a = parseFloat(document.getElementById('coeffA').value) || 0;
    b = parseFloat(document.getElementById('coeffB').value) || 0;
    c = parseFloat(document.getElementById('coeffC').value) || 0;
  } else if (type === 'vertex') {
    // Convert a(x-h)¬≤ + k to ax¬≤ + bx + c
    const av = parseFloat(document.getElementById('vertexA').value) || 0;
    const h = parseFloat(document.getElementById('vertexH').value) || 0;
    const k = parseFloat(document.getElementById('vertexK').value) || 0;
    a = av;
    b = -2 * av * h;
    c = av * h * h + k;
  } else if (type === 'factored') {
    // Convert a(x-r1)(x-r2) to ax¬≤ + bx + c
    const af = parseFloat(document.getElementById('factorA').value) || 0;
    const r1 = parseFloat(document.getElementById('factorR1').value) || 0;
    const r2 = parseFloat(document.getElementById('factorR2').value) || 0;
    a = af;
    b = -af * (r1 + r2);
    c = af * r1 * r2;
  } else if (type === 'inequality') {
    a = parseFloat(document.getElementById('ineqA').value) || 0;
    b = parseFloat(document.getElementById('ineqB').value) || 0;
    c = parseFloat(document.getElementById('ineqC').value) || 0;
  }

  return {a, b, c, type};
}

// Add input listeners for all forms
document.getElementById('vertexA').addEventListener('input', updateEquationDisplay);
document.getElementById('vertexH').addEventListener('input', updateEquationDisplay);
document.getElementById('vertexK').addEventListener('input', updateEquationDisplay);
document.getElementById('factorA').addEventListener('input', updateEquationDisplay);
document.getElementById('factorR1').addEventListener('input', updateEquationDisplay);
document.getElementById('factorR2').addEventListener('input', updateEquationDisplay);
document.getElementById('ineqA').addEventListener('input', updateEquationDisplay);
document.getElementById('ineqB').addEventListener('input', updateEquationDisplay);
document.getElementById('ineqC').addEventListener('input', updateEquationDisplay);
document.getElementById('ineqOperator').addEventListener('change', updateEquationDisplay);

// Initialize
updateEquationDisplay();

// Auto-solve on page load
window.addEventListener('load', function() {
  // Load parameters from URL if present
  loadFromURL();

  setTimeout(() => {
    solveQuadratic();
  }, 500);
});
</script>

<div class="sharethis-inline-share-buttons"></div>
<%@ include file="thanks.jsp"%>
<hr>
<%@ include file="footer_adsense.jsp"%>
<%@ include file="addcomments.jsp"%>
</div>
<%@ include file="body-close.jsp"%>
