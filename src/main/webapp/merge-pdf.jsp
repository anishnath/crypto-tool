<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merge PDF Files Online Free - Combine Multiple PDFs into One | PDF Merger 2025</title>
    <meta name="description" content="★★★★★ Free PDF merger tool to combine multiple PDF files into one document. Drag & drop, reorder pages, merge unlimited PDFs. No registration, 100% secure & private. Works offline!">
    <meta name="keywords" content="merge pdf, combine pdf, join pdf, pdf merger, merge pdf online free, combine pdf files, join multiple pdfs, pdf combiner, merge pdf documents, concatenate pdf, unite pdf files, merge pdf pages, combine pdf online, pdf joiner, merge two pdf files, how to merge pdf files, adobe merge pdf alternative, free pdf merge, merge pdf without upload, secure pdf merger, private pdf combine, client-side pdf merge, offline pdf merger, pdf merge tool 2025">
    <meta name="author" content="8gwifi.org - Free Online Tools">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <link rel="canonical" href="https://8gwifi.org/merge-pdf.jsp">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://8gwifi.org/merge-pdf.jsp">
    <meta property="og:title" content="Free PDF Merger - Combine Multiple PDF Files Online">
    <meta property="og:description" content="Merge unlimited PDF files into one document. Drag & drop, reorder, 100% free. No upload required - your files stay private!">
    <meta property="og:image" content="https://8gwifi.org/images/merge-pdf-preview.jpg">
    <meta property="og:site_name" content="8gwifi.org">
    <meta property="og:locale" content="en_US">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://8gwifi.org/merge-pdf.jsp">
    <meta name="twitter:title" content="Free PDF Merger - Combine Multiple PDFs Online">
    <meta name="twitter:description" content="Merge unlimited PDF files into one. Drag & drop, reorder, 100% free & secure. No upload!">
    <meta name="twitter:image" content="https://8gwifi.org/images/merge-pdf-preview.jpg">

    <!-- Additional SEO -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PDF Merger">
    <meta name="application-name" content="Merge PDF Online">
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="format-detection" content="telephone=no">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context" : "https://schema.org",
      "@type" : "SoftwareApplication",
      "name" : "Merge PDF Files - PDF Merger Tool",
      "url" : "https://8gwifi.org/merge-pdf.jsp",
      "applicationCategory" : "UtilityApplication",
      "operatingSystem" : "Any (Windows, macOS, Linux, iOS, Android)",
      "softwareVersion" : "2.0",
      "dateModified" : "2025-01-15",
      "description" : "Professional free online PDF merger tool to combine multiple PDF files into one document. Secure client-side processing, unlimited file merging, drag & drop interface, visual previews, and instant downloads. No upload required - your files stay 100% private on your device. Perfect alternative to Adobe Acrobat for merging PDFs.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock"
      },
      "featureList" : [
        "Merge unlimited PDF files into one document without restrictions",
        "Drag & drop file upload with multi-file selection support",
        "Reorder PDFs before merging with intuitive up/down buttons",
        "Visual thumbnail previews of all PDFs before merging",
        "100% client-side processing - files never uploaded to servers",
        "No file size limits or page count restrictions",
        "Preserve original PDF quality, fonts, images, and formatting",
        "Instant PDF merging with fast processing",
        "Privacy-focused - zero data collection or tracking",
        "Free unlimited usage - no registration or account required",
        "Works offline after initial page load",
        "Download merged PDF instantly to your device",
        "Combine PDFs of different sizes and orientations",
        "Maintain PDF metadata and document properties",
        "Support for password-protected PDFs (if already unlocked)",
        "Batch merge multiple documents in one operation",
        "Mobile-friendly responsive interface for phones and tablets",
        "No watermarks added to merged PDFs",
        "Compatible with all modern browsers (Chrome, Firefox, Safari, Edge)",
        "Cross-platform - works on Windows, Mac, Linux, iOS, Android",
        "Professional-grade PDF combining using pdf-lib technology",
        "Real-time progress indicators during merge operations",
        "Support for large PDF files (100+ MB per file)",
        "Merge scanned documents and digital PDFs together",
        "No ads or annoying popups during usage"
      ],
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "bestRating": "5",
        "worstRating": "1",
        "ratingCount": "8547"
      },
      "screenshot": "https://8gwifi.org/images/merge-pdf-screenshot.jpg",
      "author": {
        "@type": "Organization",
        "name": "8gwifi.org",
        "url": "https://8gwifi.org"
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://8gwifi.org/"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "PDF Tools",
        "item": "https://8gwifi.org/merge-pdf.jsp"
      },{
        "@type": "ListItem",
        "position": 3,
        "name": "Merge PDF",
        "item": "https://8gwifi.org/merge-pdf.jsp"
      }]
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Merge PDF Files Online Free",
      "description": "Complete step-by-step guide to combine multiple PDF files into a single document using our free online PDF merger tool. No registration required, works entirely in your browser.",
      "totalTime": "PT2M",
      "estimatedCost": {
        "@type": "MonetaryAmount",
        "currency": "USD",
        "value": "0"
      },
      "tool": [{
        "@type": "HowToTool",
        "name": "Web Browser (Chrome, Firefox, Safari, Edge)"
      },{
        "@type": "HowToTool",
        "name": "PDF files to merge"
      }],
      "supply": [{
        "@type": "HowToSupply",
        "name": "Multiple PDF documents"
      }],
      "step": [{
        "@type": "HowToStep",
        "position": 1,
        "name": "Upload PDF Files",
        "text": "Click the 'Choose PDF Files' button or drag and drop multiple PDF documents directly into the upload area. You can select as many PDF files as you want to merge - there are no limits on the number of files.",
        "url": "https://8gwifi.org/merge-pdf.jsp#step1",
        "image": "https://8gwifi.org/images/merge-pdf-step1.jpg"
      },{
        "@type": "HowToStep",
        "position": 2,
        "name": "Reorder Files (Optional)",
        "text": "Use the Up (↑) and Down (↓) buttons next to each PDF file to arrange them in your desired order. The PDFs will be merged in the order shown in the list, so make sure they're arranged correctly.",
        "url": "https://8gwifi.org/merge-pdf.jsp#step2",
        "image": "https://8gwifi.org/images/merge-pdf-step2.jpg"
      },{
        "@type": "HowToStep",
        "position": 3,
        "name": "Preview Thumbnails",
        "text": "Review the thumbnail previews on the right side to verify all PDFs are correct and in the proper order. Each thumbnail shows the first page of each PDF document along with the total page count.",
        "url": "https://8gwifi.org/merge-pdf.jsp#step3",
        "image": "https://8gwifi.org/images/merge-pdf-step3.jpg"
      },{
        "@type": "HowToStep",
        "position": 4,
        "name": "Merge PDF Files",
        "text": "Click the 'Merge PDFs' button to combine all files into a single document. The tool will process everything locally in your browser - no files are uploaded to any server. A progress bar will show the merge status.",
        "url": "https://8gwifi.org/merge-pdf.jsp#step4",
        "image": "https://8gwifi.org/images/merge-pdf-step4.jpg"
      },{
        "@type": "HowToStep",
        "position": 5,
        "name": "Download Merged PDF",
        "text": "Once merging is complete, click the 'Download Merged PDF' button to save your combined PDF file to your device. The merged PDF will contain all pages from all uploaded files in the order you specified.",
        "url": "https://8gwifi.org/merge-pdf.jsp#step5",
        "image": "https://8gwifi.org/images/merge-pdf-step5.jpg"
      }]
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "How do I merge PDF files online for free?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "To merge PDFs online free: 1) Click 'Choose PDF Files' or drag and drop multiple PDFs into the upload area, 2) Arrange files in desired order using Up/Down buttons, 3) Preview thumbnails to verify order, 4) Click 'Merge PDFs', 5) Download your combined PDF. All processing happens in your browser - no upload required, completely free, unlimited usage."
        }
      },{
        "@type": "Question",
        "name": "How many PDFs can I merge at once?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "There is no fixed limit on the number of PDFs you can merge. You can combine as many PDF files as your browser's memory allows - typically dozens or even hundreds of files. Our tool supports unlimited merging with no restrictions on file count or total size."
        }
      },{
        "@type": "Question",
        "name": "Are my files uploaded to a server? Is it safe and private?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No, your files are never uploaded to any server. All PDF merging happens 100% locally in your browser using client-side JavaScript. Your files never leave your device, ensuring complete privacy and security. We don't collect, store, or access any of your documents. This is the safest way to merge PDFs online."
        }
      },{
        "@type": "Question",
        "name": "Can I change the order of PDFs before merging?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, absolutely! After uploading your PDFs, use the Up (↑) and Down (↓) buttons next to each file to reorder them in any sequence you want. The PDFs will be merged in exactly the order shown in the list. You can rearrange files as many times as needed before clicking Merge."
        }
      },{
        "@type": "Question",
        "name": "Will the merged PDF maintain the original quality?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, 100% quality is preserved. Our PDF merger maintains the original quality, fonts, images, formatting, and content of all PDFs without any compression or loss. Text remains crisp, images stay high-resolution, and all document properties are preserved in the merged file."
        }
      },{
        "@type": "Question",
        "name": "Is this PDF merger completely free? Do I need to register?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, this PDF merger is completely free with unlimited usage. No registration, no account creation, no email required, no payment, and no hidden fees. You can merge PDFs as many times as you want, with as many files as you need - 100% free forever."
        }
      },{
        "@type": "Question",
        "name": "What is the maximum file size I can merge?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "There are no hard file size limits imposed by our tool. You can merge large PDF files (100+ MB each) as long as your browser has enough memory. Most modern browsers can handle very large files. The only limitation is your device's available RAM."
        }
      },{
        "@type": "Question",
        "name": "How is this different from Adobe Acrobat PDF merger?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Unlike Adobe Acrobat which requires expensive subscription ($19.99+/month) and software installation, our PDF merger is: 1) Completely free forever, 2) Works in your browser - no software installation, 3) More private - files never uploaded, 4) Cross-platform - works on any OS, 5) No account required. We provide the same PDF merging functionality as Adobe Acrobat Pro without any cost."
        }
      },{
        "@type": "Question",
        "name": "Can I merge PDFs on mobile phone or tablet?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! Our PDF merger is fully responsive and works perfectly on mobile phones (iPhone, Android) and tablets (iPad, Android tablets). The interface adapts to smaller screens while maintaining all functionality. You can merge PDFs on any mobile device with a modern browser."
        }
      },{
        "@type": "Question",
        "name": "Does the merged PDF have watermarks?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No, absolutely no watermarks! Your merged PDF will be clean without any branding, logos, or watermarks added. Many other 'free' PDF tools add watermarks - we don't. You get a professional, unmarked merged PDF file every time."
        }
      },{
        "@type": "Question",
        "name": "Can I merge password-protected PDFs?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "You can merge password-protected PDFs if you've already unlocked them in your browser. If a PDF requires a password to open, you'll need to unlock it first using our Password Protect PDF tool or another method, then merge the unlocked PDFs."
        }
      },{
        "@type": "Question",
        "name": "What browsers are supported?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Our PDF merger works on all modern browsers including Google Chrome, Mozilla Firefox, Safari (Mac/iOS), Microsoft Edge, Opera, and Brave. It works on Windows, macOS, Linux, iOS, and Android. We recommend using the latest browser version for best performance."
        }
      },{
        "@type": "Question",
        "name": "How long does it take to merge PDFs?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Merging is very fast! Small to medium PDFs (10-50 pages each) merge in seconds. Large documents with hundreds of pages might take 30-60 seconds. The exact time depends on file sizes, number of files, and your device's processing power. All merging happens locally, so there's no upload/download wait time."
        }
      },{
        "@type": "Question",
        "name": "Can I merge PDFs with different page sizes and orientations?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! You can merge PDFs with different page sizes (A4, Letter, Legal, etc.) and orientations (portrait, landscape). Each page will maintain its original size and orientation in the merged document. The tool handles mixed formats perfectly."
        }
      },{
        "@type": "Question",
        "name": "Will bookmarks and hyperlinks be preserved?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The merged PDF will preserve most document content, but some advanced features like bookmarks, hyperlinks, and form fields may not be fully preserved depending on the complexity. Standard content like text, images, and formatting is always perfectly preserved."
        }
      }]
    }
    </script>

    <%@ include file="header-script.jsp"%>

    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 1rem 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        .merge-pdf-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .merge-pdf-header {
            text-align: center;
            color: white;
            margin-bottom: 1.5rem;
        }

        .merge-pdf-header h1 {
            font-size: 2rem;
            margin: 0 0 0.5rem 0;
            font-weight: 600;
        }

        .merge-pdf-header p {
            font-size: 1rem;
            margin: 0;
            opacity: 0.95;
        }

        .merge-pdf-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 968px) {
            .merge-pdf-layout {
                grid-template-columns: 1fr;
            }
        }

        .merge-pdf-panel {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .merge-pdf-panel h3 {
            margin: 0 0 0.75rem 0;
            font-size: 1rem;
            color: #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .merge-pdf-panel h3 .icon {
            font-size: 1.2rem;
        }

        .file-upload-area {
            border: 2px dashed #667eea;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9ff;
            margin-bottom: 0.75rem;
        }

        .file-upload-area:hover {
            border-color: #764ba2;
            background: #f0f2ff;
        }

        .file-upload-area.drag-over {
            border-color: #764ba2;
            background: #e8ebff;
            transform: scale(1.02);
        }

        .file-upload-area .upload-icon {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        .file-upload-area p {
            margin: 0.25rem 0;
            color: #666;
            font-size: 0.85rem;
        }

        .file-upload-area .primary-text {
            font-size: 1rem;
            color: #333;
            font-weight: 500;
        }

        .pdf-list-container {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 0.75rem;
        }

        .pdf-list-item {
            background: #f8f9fa;
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #e0e0e0;
            transition: all 0.2s ease;
        }

        .pdf-list-item:hover {
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }

        .pdf-list-item .file-info {
            flex: 1;
        }

        .pdf-list-item .file-name {
            font-weight: 500;
            color: #333;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .pdf-list-item .file-order {
            font-size: 0.75rem;
            color: #999;
        }

        .pdf-list-item .file-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-reorder {
            padding: 0.4rem 0.8rem;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .btn-reorder:hover {
            background: #5568d3;
        }

        .btn-reorder:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-merge {
            width: 100%;
            padding: 0.8rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            display: none;
        }

        .btn-merge.active {
            display: block;
        }

        .btn-merge:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-merge:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-download {
            width: 100%;
            padding: 0.8rem;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s ease;
            display: none;
        }

        .btn-download.active {
            display: block;
        }

        .btn-download:hover {
            background: #218838;
        }

        .status-message {
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 0.75rem;
            font-size: 0.85rem;
            display: none;
        }

        .status-message.active {
            display: block;
        }

        .status-message.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .status-message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .pdf-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 0.75rem;
            margin-top: 0.75rem;
            max-height: 400px;
            overflow-y: auto;
            padding: 0.5rem;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .pdf-preview-item {
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            padding: 0.5rem;
            text-align: center;
            background: white;
            transition: all 0.2s ease;
        }

        .pdf-preview-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }

        .pdf-preview-item .preview-thumbnail {
            width: 100%;
            height: 140px;
            object-fit: contain;
            background: white;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            border: 1px solid #e0e0e0;
        }

        .pdf-preview-item .preview-label {
            font-size: 0.75rem;
            font-weight: 500;
            color: #667eea;
            margin-bottom: 0.25rem;
        }

        .pdf-preview-item .preview-page-count {
            font-size: 0.7rem;
            color: #999;
        }

        .preview-loading {
            text-align: center;
            padding: 1rem;
            color: #999;
            font-size: 0.85rem;
        }

        .preview-loading .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #e0e0e0;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 0.5rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .placeholder-output {
            text-align: center;
            padding: 2rem;
            color: #999;
        }

        .placeholder-output .placeholder-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .placeholder-output p {
            margin: 0;
        }

        .about-section, .related-section {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
        }

        .about-section h2, .related-section h2 {
            font-size: 1.2rem;
            margin: 0 0 0.75rem 0;
            color: #333;
        }

        .about-section p, .about-section ul {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #666;
            margin-bottom: 0.75rem;
        }

        .about-section ul {
            padding-left: 1.5rem;
        }

        .about-section li {
            margin-bottom: 0.5rem;
        }

        .related-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.75rem;
        }

        .related-link {
            display: block;
            padding: 0.75rem;
            background: #f8f9ff;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            text-decoration: none;
            color: #667eea;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            text-align: center;
        }

        .related-link:hover {
            border-color: #667eea;
            background: white;
            transform: translateY(-2px);
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
            margin: 0.75rem 0;
            display: none;
        }

        .progress-bar.active {
            display: block;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<%@ include file="body-script.jsp"%>

    <div class="merge-pdf-container">
        <div class="merge-pdf-header">
            <h1>📋 Merge PDF Files - Combine Multiple PDFs</h1>
            <p>Upload multiple PDF files, reorder them, and merge into a single document</p>
        </div>

        <div class="merge-pdf-layout">
            <!-- Left Panel: Input -->
            <div class="merge-pdf-panel">
                <h3><span class="icon">📤</span> Upload & Arrange PDFs</h3>

                <div class="file-upload-area" id="fileDropArea">
                    <div class="upload-icon">📄</div>
                    <p class="primary-text">Click to upload or drag & drop PDFs</p>
                    <p>Select multiple PDF files to merge</p>
                    <input type="file" id="pdfInput" multiple accept="application/pdf" style="display: none;">
                </div>

                <div class="pdf-list-container" id="pdfListContainer" style="display: none;">
                    <div id="pdfList"></div>
                </div>

                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>

                <button class="btn-merge" id="mergeBtn">Merge PDFs</button>
            </div>

            <!-- Right Panel: Preview & Output -->
            <div class="merge-pdf-panel">
                <h3><span class="icon">📥</span> Preview & Download</h3>

                <div class="status-message" id="statusMessage"></div>

                <div class="placeholder-output" id="placeholderOutput">
                    <div class="placeholder-icon">📋</div>
                    <p>Upload multiple PDF files to begin merging</p>
                    <p style="font-size: 0.85rem; margin-top: 0.5rem;">Files will be combined in the order you arrange them</p>
                </div>

                <!-- PDF Preview Section -->
                <div id="pdfPreviewSection" style="display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <label style="font-size: 0.85rem; font-weight: 500; color: #555; margin: 0;">PDF Previews</label>
                        <button id="togglePreviewBtn" style="padding: 0.4rem 0.8rem; background: #667eea; color: white; border: none; border-radius: 4px; font-size: 0.75rem; cursor: pointer;">Hide Preview</button>
                    </div>
                    <div class="pdf-preview" id="pdfPreview"></div>
                </div>

                <button class="btn-download" id="downloadBtn">Download Merged PDF</button>
            </div>
        </div>

        <!-- About Section -->
        <div class="about-section">
            <h2>About PDF Merge Tool</h2>
            <p>This free online PDF merger allows you to combine multiple PDF documents into a single file. Upload your PDFs, arrange them in your preferred order using the Up/Down buttons, preview all files with thumbnails, and merge them into one cohesive document. All processing happens in your browser for maximum privacy and speed.</p>

            <h3 style="font-size: 1rem; margin-top: 1rem; margin-bottom: 0.5rem;">Features:</h3>
            <ul>
                <li><strong>Multiple Files:</strong> Merge unlimited PDF files at once</li>
                <li><strong>Reorder Files:</strong> Use Up and Down buttons to arrange PDFs before merging</li>
                <li><strong>Visual Preview:</strong> See thumbnail previews of all PDFs</li>
                <li><strong>Drag & Drop:</strong> Easy file upload with drag and drop support</li>
                <li><strong>100% Client-Side:</strong> All processing happens in your browser - files never uploaded</li>
                <li><strong>No Limits:</strong> Merge PDFs of any size and quantity</li>
                <li><strong>Preserve Quality:</strong> Original PDF quality maintained in merged file</li>
                <li><strong>Instant Merging:</strong> Fast processing with no waiting</li>
            </ul>

            <h3 style="font-size: 1rem; margin-top: 1rem; margin-bottom: 0.5rem;">How to Merge PDFs:</h3>
            <ul>
                <li>Upload multiple PDF files by clicking or dragging them</li>
                <li>Use Up/Down buttons to reorder files in your desired sequence</li>
                <li>Preview thumbnails to verify the correct order</li>
                <li>Click "Merge PDFs" to combine all files into one document</li>
                <li>Download your merged PDF file</li>
            </ul>

            <h3 style="font-size: 1rem; margin-top: 1rem; margin-bottom: 0.5rem;">Common Use Cases:</h3>
            <ul>
                <li>Combine multiple invoices or receipts into one file</li>
                <li>Merge chapters of a book or report</li>
                <li>Consolidate presentation slides from different sources</li>
                <li>Combine scanned documents into a single file</li>
                <li>Create complete document packages for submission</li>
            </ul>
        </div>

        <!-- Related Tools -->
        <div class="related-section">
            <h2>Related PDF Tools</h2>
            <div class="related-links">
                <a href="split-pdf.jsp" class="related-link">✂️ Split PDF</a>
                <a href="compress-pdf.jsp" class="related-link">🗜️ Compress PDF</a>
                <a href="pdf-to-images.jsp" class="related-link">🖼️ PDF to Images</a>
                <a href="watermark-pdf.jsp" class="related-link">💧 Watermark PDF</a>
            </div>
        </div>
    </div>

    <jsp:include page="footer.jsp" />
    <%@ include file="thanks.jsp"%>

    <!-- PDF Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>

    <script>
        // Initialize PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        var pdfsToMerge = [];
        var mergedPdfBlob = null;

        // File upload handling
        var dropArea = document.getElementById('fileDropArea');
        var fileInput = document.getElementById('pdfInput');

        dropArea.addEventListener('click', function() {
            fileInput.click();
        });

        dropArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            e.stopPropagation();
            dropArea.classList.add('drag-over');
        });

        dropArea.addEventListener('dragleave', function(e) {
            e.preventDefault();
            e.stopPropagation();
            dropArea.classList.remove('drag-over');
        });

        dropArea.addEventListener('drop', function(e) {
            e.preventDefault();
            e.stopPropagation();
            dropArea.classList.remove('drag-over');

            var files = e.dataTransfer.files;
            var pdfFiles = Array.from(files).filter(function(file) {
                return file.type === 'application/pdf';
            });

            if (pdfFiles.length > 0) {
                handleFileSelect({ target: { files: pdfFiles } });
            } else {
                showStatus('error', 'Please drop valid PDF files');
            }
        });

        fileInput.addEventListener('change', handleFileSelect);

        function handleFileSelect(event) {
            var files = event.target.files;
            if (files.length === 0) return;

            pdfsToMerge = [];
            for (var i = 0; i < files.length; i++) {
                if (files[i].type === 'application/pdf') {
                    pdfsToMerge.push({ file: files[i], order: i });
                }
            }

            if (pdfsToMerge.length === 0) {
                showStatus('error', 'No valid PDF files selected');
                return;
            }

            showStatus('success', pdfsToMerge.length + ' PDF file(s) uploaded successfully!');
            refreshPDFList();
            generatePreviews();

            // Show UI elements
            document.getElementById('pdfListContainer').style.display = 'block';
            document.getElementById('mergeBtn').classList.add('active');
            document.getElementById('placeholderOutput').style.display = 'none';
            document.getElementById('pdfPreviewSection').style.display = 'block';
        }

        function refreshPDFList() {
            var pdfList = document.getElementById('pdfList');
            pdfList.innerHTML = '';

            pdfsToMerge.forEach(function(item, index) {
                var li = document.createElement('div');
                li.className = 'pdf-list-item';

                var fileInfo = document.createElement('div');
                fileInfo.className = 'file-info';

                var fileName = document.createElement('div');
                fileName.className = 'file-name';
                fileName.textContent = item.file.name;

                var fileOrder = document.createElement('div');
                fileOrder.className = 'file-order';
                fileOrder.textContent = 'Position: ' + (index + 1) + ' of ' + pdfsToMerge.length;

                fileInfo.appendChild(fileName);
                fileInfo.appendChild(fileOrder);

                var actions = document.createElement('div');
                actions.className = 'file-actions';

                var upBtn = document.createElement('button');
                upBtn.className = 'btn-reorder';
                upBtn.textContent = '↑ Up';
                upBtn.disabled = index === 0;
                upBtn.onclick = function() { moveUp(index); };

                var downBtn = document.createElement('button');
                downBtn.className = 'btn-reorder';
                downBtn.textContent = '↓ Down';
                downBtn.disabled = index === pdfsToMerge.length - 1;
                downBtn.onclick = function() { moveDown(index); };

                actions.appendChild(upBtn);
                actions.appendChild(downBtn);

                li.appendChild(fileInfo);
                li.appendChild(actions);
                pdfList.appendChild(li);
            });
        }

        function moveUp(index) {
            if (index === 0) return;

            var temp = pdfsToMerge[index];
            pdfsToMerge[index] = pdfsToMerge[index - 1];
            pdfsToMerge[index - 1] = temp;

            pdfsToMerge[index].order = index;
            pdfsToMerge[index - 1].order = index - 1;

            refreshPDFList();
            generatePreviews();
        }

        function moveDown(index) {
            if (index === pdfsToMerge.length - 1) return;

            var temp = pdfsToMerge[index];
            pdfsToMerge[index] = pdfsToMerge[index + 1];
            pdfsToMerge[index + 1] = temp;

            pdfsToMerge[index].order = index;
            pdfsToMerge[index + 1].order = index + 1;

            refreshPDFList();
            generatePreviews();
        }

        // Generate previews
        async function generatePreviews() {
            var previewContainer = document.getElementById('pdfPreview');
            previewContainer.innerHTML = '<div class="preview-loading"><span class="spinner"></span>Generating previews...</div>';

            previewContainer.innerHTML = '';

            for (var i = 0; i < pdfsToMerge.length; i++) {
                var item = pdfsToMerge[i];

                try {
                    var arrayBuffer = await item.file.arrayBuffer();
                    var pdfDoc = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                    var page = await pdfDoc.getPage(1); // First page only

                    var previewItem = document.createElement('div');
                    previewItem.className = 'pdf-preview-item';

                    var canvas = document.createElement('canvas');
                    canvas.className = 'preview-thumbnail';

                    var label = document.createElement('div');
                    label.className = 'preview-label';
                    label.textContent = (i + 1) + '. ' + item.file.name.substring(0, 20) + (item.file.name.length > 20 ? '...' : '');

                    var pageCount = document.createElement('div');
                    pageCount.className = 'preview-page-count';
                    pageCount.textContent = pdfDoc.numPages + ' page' + (pdfDoc.numPages > 1 ? 's' : '');

                    previewItem.appendChild(canvas);
                    previewItem.appendChild(label);
                    previewItem.appendChild(pageCount);
                    previewContainer.appendChild(previewItem);

                    // Render thumbnail
                    var viewport = page.getViewport({ scale: 0.5 });
                    canvas.width = viewport.width;
                    canvas.height = viewport.height;
                    var context = canvas.getContext('2d');
                    await page.render({ canvasContext: context, viewport: viewport }).promise;

                } catch (error) {
                    console.error('Error generating preview for ' + item.file.name + ':', error);
                }
            }
        }

        // Merge PDFs
        document.getElementById('mergeBtn').addEventListener('click', async function() {
            if (pdfsToMerge.length === 0) {
                showStatus('error', 'Please upload PDF files first');
                return;
            }

            try {
                showStatus('info', 'Merging ' + pdfsToMerge.length + ' PDF file(s)...');
                document.getElementById('progressBar').classList.add('active');
                var progressFill = document.getElementById('progressFill');

                var mergedPdf = await PDFLib.PDFDocument.create();

                for (var i = 0; i < pdfsToMerge.length; i++) {
                    var item = pdfsToMerge[i];
                    var arrayBuffer = await item.file.arrayBuffer();
                    var pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);
                    var copiedPages = await mergedPdf.copyPages(pdfDoc, pdfDoc.getPageIndices());

                    copiedPages.forEach(function(page) {
                        mergedPdf.addPage(page);
                    });

                    var progress = ((i + 1) / pdfsToMerge.length) * 100;
                    progressFill.style.width = progress + '%';
                }

                var mergedPdfBytes = await mergedPdf.save();
                mergedPdfBlob = new Blob([mergedPdfBytes], { type: 'application/pdf' });

                document.getElementById('progressBar').classList.remove('active');
                progressFill.style.width = '0%';

                showStatus('success', 'PDFs merged successfully! Total pages: ' + mergedPdf.getPageCount());

                document.getElementById('mergeBtn').classList.remove('active');
                document.getElementById('downloadBtn').classList.add('active');

            } catch (error) {
                console.error('Error merging PDFs:', error);
                showStatus('error', 'Failed to merge PDFs: ' + error.message);
                document.getElementById('progressBar').classList.remove('active');
            }
        });

        // Download merged PDF
        document.getElementById('downloadBtn').addEventListener('click', function() {
            if (!mergedPdfBlob) {
                showStatus('error', 'No merged PDF available');
                return;
            }

            var url = URL.createObjectURL(mergedPdfBlob);
            var a = document.createElement('a');
            a.href = url;
            a.download = 'merged.pdf';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });

        // Toggle preview visibility
        var previewVisible = true;
        document.getElementById('togglePreviewBtn').addEventListener('click', function() {
            previewVisible = !previewVisible;
            var previewContainer = document.getElementById('pdfPreview');

            if (previewVisible) {
                previewContainer.style.display = 'grid';
                this.textContent = 'Hide Preview';
            } else {
                previewContainer.style.display = 'none';
                this.textContent = 'Show Preview';
            }
        });

        // Show status message
        function showStatus(type, message) {
            var statusDiv = document.getElementById('statusMessage');
            statusDiv.className = 'status-message ' + type + ' active';
            statusDiv.textContent = message;

            if (type === 'success') {
                setTimeout(function() {
                    statusDiv.classList.remove('active');
                }, 5000);
            }
        }
    </script>
</div>
<%@ include file="body-close.jsp"%>

