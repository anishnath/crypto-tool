<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
    <!-- Background -->
    <rect width="800" height="500" fill="#ffffff"/>

    <!-- Title -->
    <text x="400" y="35" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">HashSet Internal Structure</text>
    <text x="400" y="58" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#666">Hash table with buckets for O(1) operations</text>

    <!-- Hash Function illustration -->
    <g transform="translate(50, 85)">
        <rect x="0" y="0" width="150" height="50" rx="6" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
        <text x="75" y="20" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="#e65100">Element</text>
        <text x="75" y="38" text-anchor="middle" font-family="Monospace" font-size="14" fill="#bf360c">"Apple"</text>
    </g>

    <path d="M200 110 L280 110" stroke="#ff9800" stroke-width="2" fill="none"/>
    <polygon points="280,110 270,105 270,115" fill="#ff9800"/>

    <g transform="translate(290, 85)">
        <rect x="0" y="0" width="120" height="50" rx="25" fill="#ffcc80" stroke="#f57c00" stroke-width="2"/>
        <text x="60" y="22" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="#e65100">hashCode()</text>
        <text x="60" y="38" text-anchor="middle" font-family="Monospace" font-size="10" fill="#bf360c">% buckets.length</text>
    </g>

    <path d="M410 110 L490 110" stroke="#ff9800" stroke-width="2" fill="none"/>
    <polygon points="490,110 480,105 480,115" fill="#ff9800"/>

    <g transform="translate(500, 85)">
        <rect x="0" y="0" width="100" height="50" rx="6" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
        <text x="50" y="20" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="#2e7d32">Bucket</text>
        <text x="50" y="38" text-anchor="middle" font-family="Monospace" font-size="14" fill="#1b5e20">Index 2</text>
    </g>

    <!-- Bucket Array -->
    <g transform="translate(100, 170)">
        <text x="-40" y="60" font-family="Arial" font-size="14" font-weight="bold" fill="#1565c0">Buckets</text>

        <!-- Bucket 0 -->
        <rect x="0" y="0" width="80" height="50" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
        <text x="40" y="30" text-anchor="middle" font-family="Arial" font-size="11" fill="#1565c0">[0]</text>

        <!-- Empty indicator -->
        <text x="40" y="65" text-anchor="middle" font-family="Arial" font-size="10" fill="#9e9e9e">empty</text>

        <!-- Bucket 1 -->
        <rect x="100" y="0" width="80" height="50" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
        <text x="140" y="30" text-anchor="middle" font-family="Arial" font-size="11" fill="#1565c0">[1]</text>

        <!-- Element in bucket 1 -->
        <rect x="90" y="70" width="100" height="35" rx="4" fill="#c8e6c9" stroke="#388e3c" stroke-width="2"/>
        <text x="140" y="93" text-anchor="middle" font-family="Monospace" font-size="12" fill="#1b5e20">"Banana"</text>

        <line x1="140" y1="50" x2="140" y2="70" stroke="#1976d2" stroke-width="2"/>

        <!-- Bucket 2 -->
        <rect x="200" y="0" width="80" height="50" fill="#fff3e0" stroke="#ff9800" stroke-width="3"/>
        <text x="240" y="30" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="#e65100">[2]</text>

        <!-- Elements in bucket 2 (collision chain) -->
        <rect x="190" y="70" width="100" height="35" rx="4" fill="#ffe0b2" stroke="#f57c00" stroke-width="2"/>
        <text x="240" y="93" text-anchor="middle" font-family="Monospace" font-size="12" fill="#e65100">"Apple"</text>

        <line x1="240" y1="50" x2="240" y2="70" stroke="#ff9800" stroke-width="2"/>

        <path d="M290 87 L320 87" stroke="#ef6c00" stroke-width="2" fill="none"/>
        <polygon points="320,87 310,82 310,92" fill="#ef6c00"/>

        <rect x="330" y="70" width="100" height="35" rx="4" fill="#ffe0b2" stroke="#f57c00" stroke-width="2"/>
        <text x="380" y="93" text-anchor="middle" font-family="Monospace" font-size="12" fill="#e65100">"Cherry"</text>
        <text x="380" y="120" text-anchor="middle" font-family="Arial" font-size="9" fill="#c62828">collision!</text>

        <!-- Bucket 3 -->
        <rect x="450" y="0" width="80" height="50" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
        <text x="490" y="30" text-anchor="middle" font-family="Arial" font-size="11" fill="#1565c0">[3]</text>

        <!-- Element in bucket 3 -->
        <rect x="440" y="70" width="100" height="35" rx="4" fill="#c8e6c9" stroke="#388e3c" stroke-width="2"/>
        <text x="490" y="93" text-anchor="middle" font-family="Monospace" font-size="12" fill="#1b5e20">"Date"</text>

        <line x1="490" y1="50" x2="490" y2="70" stroke="#1976d2" stroke-width="2"/>

        <!-- Bucket 4 -->
        <rect x="550" y="0" width="80" height="50" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
        <text x="590" y="30" text-anchor="middle" font-family="Arial" font-size="11" fill="#1565c0">[4]</text>
        <text x="590" y="65" text-anchor="middle" font-family="Arial" font-size="10" fill="#9e9e9e">empty</text>
    </g>

    <!-- Collision handling note -->
    <g transform="translate(50, 340)">
        <rect x="0" y="0" width="350" height="80" rx="8" fill="#fff8e1" stroke="#ffc107" stroke-width="2"/>
        <text x="175" y="22" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#f57f17">Collision Handling</text>
        <text x="15" y="45" font-family="Arial" font-size="11" fill="#ff8f00">When two elements hash to same bucket:</text>
        <text x="15" y="62" font-family="Arial" font-size="11" fill="#f57f17">- Linked list (Java 7 and earlier)</text>
        <text x="15" y="76" font-family="Arial" font-size="11" fill="#f57f17">- Red-black tree if &gt; 8 elements (Java 8+)</text>
    </g>

    <!-- No duplicates note -->
    <g transform="translate(420, 340)">
        <rect x="0" y="0" width="330" height="80" rx="8" fill="#ffebee" stroke="#ef5350" stroke-width="2"/>
        <text x="165" y="22" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="#c62828">No Duplicates Allowed</text>
        <text x="15" y="45" font-family="Arial" font-size="11" fill="#b71c1c">Before adding, HashSet checks:</text>
        <text x="15" y="62" font-family="Arial" font-size="11" fill="#c62828">1. hashCode() - find bucket</text>
        <text x="15" y="76" font-family="Arial" font-size="11" fill="#c62828">2. equals() - check if already exists</text>
    </g>

    <!-- Key Points -->
    <g transform="translate(50, 430)">
        <text x="0" y="15" font-family="Arial" font-size="12" fill="#1565c0">O(1) average for add, remove, contains</text>
        <text x="300" y="15" font-family="Arial" font-size="12" fill="#1565c0">|</text>
        <text x="320" y="15" font-family="Arial" font-size="12" fill="#e65100">O(n) worst case (all in one bucket)</text>
        <text x="600" y="15" font-family="Arial" font-size="12" fill="#1565c0">|</text>
        <text x="620" y="15" font-family="Arial" font-size="12" fill="#2e7d32">No ordering</text>
    </g>

    <!-- Watermark -->
    <text x="790" y="490" font-family="Arial, sans-serif" font-size="12" fill="#999" text-anchor="end">8gwifi.org/tutorials</text>
</svg>
