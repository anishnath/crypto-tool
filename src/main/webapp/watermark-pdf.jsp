<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Watermark to PDF Free - Text & QR Code Watermark Tool Online 2025</title>
    <meta name="description" content="★★★★★ Free PDF watermark tool to add text or QR code watermarks to PDF files online. Custom position, color, size. 100% secure client-side processing. No upload required!">
    <meta name="keywords" content="add watermark to pdf, pdf watermark, watermark pdf online free, add text to pdf, pdf watermark tool, qr code watermark pdf, brand pdf, secure pdf, custom watermark pdf, pdf watermark online, watermark pdf free, add logo to pdf, stamp pdf online, pdf branding tool, confidential watermark pdf, copyright watermark pdf, client-side pdf watermark, private pdf watermark, offline pdf watermark, watermark pdf 2025">
    <meta name="author" content="8gwifi.org - Free Online Tools">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <link rel="canonical" href="https://8gwifi.org/watermark-pdf.jsp">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://8gwifi.org/watermark-pdf.jsp">
    <meta property="og:title" content="Free PDF Watermark Tool - Add Text & QR Code Watermarks Online">
    <meta property="og:description" content="Add custom watermarks to PDF files free. Text or QR code, custom position, color & size. 100% private - no upload required!">
    <meta property="og:image" content="https://8gwifi.org/images/watermark-pdf-preview.jpg">
    <meta property="og:site_name" content="8gwifi.org">
    <meta property="og:locale" content="en_US">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://8gwifi.org/watermark-pdf.jsp">
    <meta name="twitter:title" content="Free PDF Watermark Tool - Add Text & QR Code Watermarks">
    <meta name="twitter:description" content="Add custom watermarks to PDFs. Text or QR code, custom position, 100% free & secure!">
    <meta name="twitter:image" content="https://8gwifi.org/images/watermark-pdf-preview.jpg">

    <!-- Additional SEO -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PDF Watermark">
    <meta name="application-name" content="Watermark PDF Online">
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="format-detection" content="telephone=no">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context" : "https://schema.org",
      "@type" : "SoftwareApplication",
      "name" : "PDF Watermark Tool - Add Text & QR Code Watermarks",
      "url" : "https://8gwifi.org/watermark-pdf.jsp",
      "applicationCategory" : "UtilityApplication",
      "operatingSystem" : "Any (Windows, macOS, Linux, iOS, Android)",
      "softwareVersion" : "2.0",
      "dateModified" : "2025-01-15",
      "description" : "Professional free online PDF watermark tool to add custom text or QR code watermarks to PDF files. Customize position, color, size, opacity, and rotation. Secure client-side processing - files never uploaded. Perfect for branding, security, and copyright protection.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock"
      },
      "featureList" : [
        "Add text watermarks to PDF files with custom text",
        "Add QR code watermarks to PDFs from any text or URL",
        "Custom watermark positioning (center, corners, top, bottom)",
        "Adjustable font size from 10-100 points",
        "Custom watermark color picker with full RGB support",
        "Automatic 45-degree rotation for diagonal watermarks",
        "Adjustable opacity for subtle or bold watermarks",
        "Apply watermark to all pages automatically",
        "100% client-side processing - files never uploaded to servers",
        "No file size limits or page restrictions",
        "Preserve original PDF quality and formatting",
        "Instant watermark application with fast processing",
        "Privacy-focused - zero data collection or tracking",
        "Free unlimited usage - no registration required",
        "Works offline after initial page load",
        "Download watermarked PDF instantly",
        "Support for confidential, copyright, and custom watermarks",
        "Professional-grade watermarking using pdf-lib technology",
        "Mobile-friendly responsive interface",
        "Compatible with all modern browsers",
        "Cross-platform - works on Windows, Mac, Linux, iOS, Android",
        "QR code generation with customizable content",
        "Brand PDFs with company names or logos (text-based)",
        "Add draft, sample, or confidential stamps",
        "No watermarks on the output - your PDF stays clean with only YOUR watermark"
      ],
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "bestRating": "5",
        "worstRating": "1",
        "ratingCount": "6234"
      },
      "screenshot": "https://8gwifi.org/images/watermark-pdf-screenshot.jpg",
      "author": {
        "@type": "Organization",
        "name": "8gwifi.org",
        "url": "https://8gwifi.org"
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://8gwifi.org/"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "PDF Tools",
        "item": "https://8gwifi.org/merge-pdf.jsp"
      },{
        "@type": "ListItem",
        "position": 3,
        "name": "Watermark PDF",
        "item": "https://8gwifi.org/watermark-pdf.jsp"
      }]
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Add Watermark to PDF Online Free",
      "description": "Complete step-by-step guide to add custom text or QR code watermarks to PDF files using our free online tool. No registration required, works entirely in your browser.",
      "totalTime": "PT2M",
      "estimatedCost": {
        "@type": "MonetaryAmount",
        "currency": "USD",
        "value": "0"
      },
      "tool": [{
        "@type": "HowToTool",
        "name": "Web Browser (Chrome, Firefox, Safari, Edge)"
      },{
        "@type": "HowToTool",
        "name": "PDF file to watermark"
      }],
      "supply": [{
        "@type": "HowToSupply",
        "name": "PDF document"
      }],
      "step": [{
        "@type": "HowToStep",
        "position": 1,
        "name": "Upload PDF File",
        "text": "Click the 'Choose PDF File' button or drag and drop your PDF document into the upload area. The file will be loaded locally in your browser - not uploaded to any server.",
        "url": "https://8gwifi.org/watermark-pdf.jsp#step1",
        "image": "https://8gwifi.org/images/watermark-pdf-step1.jpg"
      },{
        "@type": "HowToStep",
        "position": 2,
        "name": "Choose Watermark Type",
        "text": "Select whether you want to add a text watermark or QR code watermark. For text watermarks, you can customize the text content. For QR codes, enter the text or URL to encode.",
        "url": "https://8gwifi.org/watermark-pdf.jsp#step2",
        "image": "https://8gwifi.org/images/watermark-pdf-step2.jpg"
      },{
        "@type": "HowToStep",
        "position": 3,
        "name": "Customize Watermark Appearance",
        "text": "Customize your watermark by setting the text content, color (using the color picker), font size (10-100 points using the slider), and position (center, top-left, top-right, bottom-left, or bottom-right). The watermark will be applied at 50% opacity with a 45-degree rotation.",
        "url": "https://8gwifi.org/watermark-pdf.jsp#step3",
        "image": "https://8gwifi.org/images/watermark-pdf-step3.jpg"
      },{
        "@type": "HowToStep",
        "position": 4,
        "name": "Apply Watermark",
        "text": "Click the 'Add Watermark' button to apply your customized watermark to all pages of the PDF. The tool will process the PDF locally in your browser and show a download button when complete.",
        "url": "https://8gwifi.org/watermark-pdf.jsp#step4",
        "image": "https://8gwifi.org/images/watermark-pdf-step4.jpg"
      },{
        "@type": "HowToStep",
        "position": 5,
        "name": "Download Watermarked PDF",
        "text": "Once processing is complete, click the 'Download Watermarked PDF' button to save your PDF with the watermark applied to all pages. The filename will indicate whether it's a text or QR code watermark.",
        "url": "https://8gwifi.org/watermark-pdf.jsp#step5",
        "image": "https://8gwifi.org/images/watermark-pdf-step5.jpg"
      }]
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "How do I add a watermark to a PDF file online for free?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "To add a watermark to PDF free: 1) Upload your PDF file, 2) Choose watermark type (text or QR code), 3) Enter your watermark text (e.g., 'CONFIDENTIAL', 'DRAFT', company name), 4) Customize color, size, and position, 5) Click 'Add Watermark', 6) Download your watermarked PDF. All processing happens in your browser - completely free, no upload to servers, unlimited usage."
        }
      },{
        "@type": "Question",
        "name": "Can I customize the watermark appearance?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! You can fully customize: 1) Text content (any text you want), 2) Color (full RGB color picker), 3) Font size (10-100 points with slider), 4) Position (center, top-left, top-right, bottom-left, bottom-right), 5) Watermark type (text or QR code). The watermark is automatically applied at 50% opacity with a 45-degree diagonal rotation for professional appearance."
        }
      },{
        "@type": "Question",
        "name": "Are my PDF files uploaded to a server?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No, your files are never uploaded to any server. All PDF watermarking happens 100% locally in your browser using client-side JavaScript. Your files never leave your device, ensuring complete privacy and security. We don't collect, store, or access any of your documents. This is the safest way to watermark PDFs online."
        }
      },{
        "@type": "Question",
        "name": "What is a QR code watermark and when should I use it?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "A QR code watermark embeds a scannable QR code into your PDF that can contain any text, URL, or information. Use QR code watermarks to: 1) Link PDFs to online resources or websites, 2) Provide authentication or verification, 3) Track document distribution, 4) Add contact information or company details. When someone scans the QR code with their phone, they'll see the encoded information."
        }
      },{
        "@type": "Question",
        "name": "Will the watermark appear on all pages of my PDF?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, the watermark is automatically applied to all pages of your PDF document. Every page will have the same watermark with the exact same appearance, position, color, and size you configured. This ensures consistent branding or security marking throughout the entire document."
        }
      },{
        "@type": "Question",
        "name": "Is this PDF watermark tool completely free?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, this PDF watermark tool is completely free with unlimited usage. No registration, no account creation, no email required, no payment, and no hidden fees. You can watermark as many PDFs as you want, as many times as you need - 100% free forever. Unlike other tools, we don't add our own watermark to your output."
        }
      },{
        "@type": "Question",
        "name": "What are common watermark text examples I can use?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Popular watermark text examples include: CONFIDENTIAL (for sensitive documents), DRAFT (for work in progress), SAMPLE (for demo documents), COPYRIGHT © 2025 [Company Name], COPY (for non-originals), INTERNAL USE ONLY, NOT FOR DISTRIBUTION, PROPRIETARY, PRIVILEGED, PREVIEW, REVIEW COPY, Company Names, Website URLs, Email Addresses, or any custom text you need."
        }
      },{
        "@type": "Question",
        "name": "Can I add a company logo as a watermark?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "This tool currently supports text and QR code watermarks. For text-based branding, you can add your company name, slogan, or website URL as a text watermark. For QR codes, you can encode your company website URL, contact information, or any other data. Image/logo watermarks are not currently supported, but you can use text watermarks with your company name for effective branding."
        }
      },{
        "@type": "Question",
        "name": "How is this different from Adobe Acrobat watermark tool?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Unlike Adobe Acrobat which requires expensive subscription ($19.99+/month) and software installation, our PDF watermark tool is: 1) Completely free forever, 2) Works in your browser - no software installation, 3) More private - files never uploaded, 4) Cross-platform - works on any OS, 5) No account required, 6) Supports both text and QR code watermarks. We provide professional PDF watermarking functionality like Adobe Acrobat without any cost."
        }
      },{
        "@type": "Question",
        "name": "Can I watermark PDFs on mobile phone or tablet?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! Our PDF watermark tool is fully responsive and works perfectly on mobile phones (iPhone, Android) and tablets (iPad, Android tablets). The interface adapts to smaller screens while maintaining all functionality including color picker, font size slider, and position selector. You can watermark PDFs on any mobile device with a modern browser."
        }
      },{
        "@type": "Question",
        "name": "What is the maximum PDF file size I can watermark?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "There are no hard file size limits imposed by our tool. You can watermark large PDF files (100+ MB) as long as your browser has enough memory. Most modern browsers can handle very large files. The only limitation is your device's available RAM. Processing time increases with file size."
        }
      },{
        "@type": "Question",
        "name": "Will the watermark affect PDF quality or file size?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "The watermark is added as a layer on top of existing content without affecting the original PDF quality. Text remains crisp, images stay high-resolution. File size may increase slightly (typically 1-5%) due to the added watermark content, but the increase is minimal. Original formatting, fonts, and content are fully preserved."
        }
      },{
        "@type": "Question",
        "name": "Can I remove watermarks from PDFs with this tool?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No, this tool is designed to add watermarks to PDFs, not remove them. Watermark removal often requires advanced PDF editing tools and may violate copyright or document security policies. If you need to remove a watermark you previously added, you would need to start with the original unwatermarked PDF file."
        }
      },{
        "@type": "Question",
        "name": "What browsers support this PDF watermark tool?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Our PDF watermark tool works on all modern browsers including Google Chrome, Mozilla Firefox, Safari (Mac/iOS), Microsoft Edge, Opera, and Brave. It works on Windows, macOS, Linux, iOS, and Android. We recommend using the latest browser version for best performance. The tool uses modern JavaScript APIs supported by all current browsers."
        }
      },{
        "@type": "Question",
        "name": "Can I watermark password-protected PDFs?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "You can watermark password-protected PDFs if you've already unlocked them in your browser and the PDF allows editing. If a PDF has editing restrictions or requires a password to modify, you'll need to unlock or decrypt it first. Our tool respects PDF security settings and cannot bypass document protection."
        }
      }]
    }
    </script>

    <%@ include file="header-script.jsp"%>

    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 1rem 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        .watermark-pdf-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .watermark-pdf-header {
            text-align: center;
            color: white;
            margin-bottom: 1.5rem;
        }

        .watermark-pdf-header h1 {
            font-size: 2rem;
            margin: 0 0 0.5rem 0;
            font-weight: 600;
        }

        .watermark-pdf-header p {
            font-size: 1rem;
            margin: 0;
            opacity: 0.95;
        }

        .watermark-pdf-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 968px) {
            .watermark-pdf-layout {
                grid-template-columns: 1fr;
            }
        }

        .watermark-pdf-panel {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .watermark-pdf-panel h3 {
            margin: 0 0 1rem 0;
            font-size: 1.1rem;
            color: #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .watermark-pdf-panel h3 .icon {
            font-size: 1.3rem;
        }

        .file-upload-area {
            border: 2px dashed #667eea;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9ff;
            margin-bottom: 1rem;
        }

        .file-upload-area:hover {
            border-color: #764ba2;
            background: #f0f2ff;
        }

        .file-upload-area.drag-over {
            border-color: #764ba2;
            background: #e8ebff;
            transform: scale(1.02);
        }

        .file-upload-area.has-file {
            border-color: #28a745;
            background: #f0fff4;
        }

        .file-upload-area .upload-icon {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        .file-upload-area.has-file .upload-icon {
            color: #28a745;
        }

        .file-upload-area p {
            margin: 0.25rem 0;
            color: #666;
            font-size: 0.85rem;
        }

        .file-upload-area .primary-text {
            font-size: 1rem;
            color: #333;
            font-weight: 500;
        }

        .file-info-display {
            display: none;
            background: #e8f5e9;
            padding: 0.75rem;
            border-radius: 6px;
            margin-top: 0.5rem;
        }

        .file-info-display.active {
            display: block;
        }

        .file-info-display .file-name {
            font-weight: 500;
            color: #2e7d32;
            font-size: 0.9rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            font-weight: 500;
            color: #555;
        }

        .form-group input[type="text"],
        .form-group select {
            width: 100%;
            padding: 0.6rem;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: border-color 0.2s ease;
        }

        .form-group input[type="text"]:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group input[type="color"] {
            width: 100%;
            height: 50px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            cursor: pointer;
        }

        .form-group input[type="range"] {
            width: 100%;
        }

        .slider-value {
            display: inline-block;
            margin-left: 0.5rem;
            font-weight: 600;
            color: #667eea;
            font-size: 1rem;
        }

        .btn-watermark {
            width: 100%;
            padding: 0.8rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            margin-top: 0.5rem;
        }

        .btn-watermark:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-watermark:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-download {
            width: 100%;
            padding: 0.8rem;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s ease;
            display: none;
        }

        .btn-download.active {
            display: block;
        }

        .btn-download:hover {
            background: #218838;
        }

        .status-message {
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 0.75rem;
            font-size: 0.85rem;
            display: none;
        }

        .status-message.active {
            display: block;
        }

        .status-message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status-message.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .placeholder-output {
            text-align: center;
            padding: 2rem;
            color: #999;
        }

        .placeholder-output .placeholder-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .placeholder-output p {
            margin: 0.5rem 0;
            font-size: 0.9rem;
        }

        .about-section, .related-section {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
        }

        .about-section h2, .related-section h2 {
            font-size: 1.3rem;
            margin: 0 0 1rem 0;
            color: #333;
        }

        .about-section h3 {
            font-size: 1.1rem;
            margin: 1.5rem 0 0.75rem 0;
            color: #555;
        }

        .about-section p, .about-section ul {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #666;
            margin-bottom: 0.75rem;
        }

        .about-section ul {
            padding-left: 1.5rem;
        }

        .about-section li {
            margin-bottom: 0.5rem;
        }

        .related-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.75rem;
        }

        .related-link {
            display: block;
            padding: 0.75rem;
            background: #f8f9ff;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            text-decoration: none;
            color: #667eea;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            text-align: center;
        }

        .related-link:hover {
            border-color: #667eea;
            background: white;
            transform: translateY(-2px);
        }

        .watermark-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .watermark-options {
                grid-template-columns: 1fr;
            }
        }

        .pdf-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 0.75rem;
            max-height: 400px;
            overflow-y: auto;
            padding: 0.5rem;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 0.75rem;
        }

        .pdf-preview-item {
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            padding: 0.5rem;
            text-align: center;
            background: white;
            transition: all 0.2s ease;
        }

        .pdf-preview-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }

        .pdf-preview-item .preview-thumbnail {
            width: 100%;
            height: 140px;
            object-fit: contain;
            background: white;
            border-radius: 4px;
            margin-bottom: 0.5rem;
            border: 1px solid #e0e0e0;
        }

        .pdf-preview-item .preview-label {
            font-size: 0.75rem;
            font-weight: 500;
            color: #667eea;
            margin-bottom: 0.25rem;
        }

        .preview-loading {
            text-align: center;
            padding: 1rem;
            color: #999;
            font-size: 0.85rem;
        }

        .preview-loading .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #e0e0e0;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 0.5rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<%@ include file="body-script.jsp"%>

    <div class="watermark-pdf-container">
        <div class="watermark-pdf-header">
            <h1>💧 Add Watermark to PDF - Text & QR Code</h1>
            <p>Add custom text or QR code watermarks to your PDF files with full customization</p>
        </div>

        <div class="watermark-pdf-layout">
            <!-- Left Panel: Input & Configuration -->
            <div class="watermark-pdf-panel">
                <h3><span class="icon">⚙️</span> Configure Watermark</h3>

                <div class="file-upload-area" id="fileDropArea">
                    <div class="upload-icon">📄</div>
                    <p class="primary-text">Click to upload or drag & drop PDF</p>
                    <p>Select a PDF file to add watermark</p>
                    <input type="file" id="pdfInput" accept="application/pdf" style="display: none;">
                    <div class="file-info-display" id="fileInfoDisplay">
                        <div class="file-name" id="fileName"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="watermarkType">Watermark Type</label>
                    <select id="watermarkType" class="form-select">
                        <option value="text">Text Watermark</option>
                        <option value="qr">QR Code Watermark</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="watermarkText">Watermark Text / QR Code Content</label>
                    <input type="text" id="watermarkText" placeholder="CONFIDENTIAL" value="MADE BY 8GWIFI.ORG">
                </div>

                <div class="watermark-options">
                    <div class="form-group">
                        <label for="watermarkColor">Color</label>
                        <input type="color" id="watermarkColor" value="#FF0000">
                    </div>

                    <div class="form-group">
                        <label for="watermarkPosition">Position</label>
                        <select id="watermarkPosition">
                            <option value="center">Center</option>
                            <option value="top-left">Top Left</option>
                            <option value="top-right">Top Right</option>
                            <option value="bottom-left">Bottom Left</option>
                            <option value="bottom-right">Bottom Right</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="fontSizeSlider">Font Size: <span class="slider-value" id="fontSizeValue">50</span></label>
                    <input type="range" id="fontSizeSlider" min="10" max="100" value="50">
                </div>

                <button class="btn-watermark" id="addWatermarkBtn" onclick="addWatermark()">Add Watermark to PDF</button>
            </div>

            <!-- Right Panel: Output & Preview -->
            <div class="watermark-pdf-panel">
                <h3><span class="icon">📥</span> Preview & Download</h3>

                <div class="status-message" id="statusMessage"></div>

                <div class="placeholder-output" id="placeholderOutput">
                    <div class="placeholder-icon">💧</div>
                    <p><strong>Upload a PDF to get started</strong></p>
                    <p>Configure your watermark settings and click "Add Watermark"</p>
                    <p style="margin-top: 1rem; font-size: 0.85rem;">Your watermarked PDF will be ready for download here</p>
                </div>

                <!-- PDF Preview Section -->
                <div id="pdfPreviewSection" style="display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <label style="font-size: 0.85rem; font-weight: 500; color: #555; margin: 0;">PDF Preview</label>
                        <button id="togglePreviewBtn" style="padding: 0.4rem 0.8rem; background: #667eea; color: white; border: none; border-radius: 4px; font-size: 0.75rem; cursor: pointer;">Hide Preview</button>
                    </div>
                    <div class="pdf-preview" id="pdfPreview"></div>
                </div>

                <button class="btn-download" id="downloadBtn">Download Watermarked PDF</button>
            </div>
        </div>

        <!-- About Section -->
        <div class="about-section">
            <h2>About PDF Watermark Tool</h2>
            <p>This free online PDF watermark tool allows you to add custom text or QR code watermarks to your PDF documents. Perfect for branding, security, copyright protection, or marking documents as confidential, draft, or samples. Customize every aspect of your watermark including text, color, size, and position. All processing happens in your browser for maximum privacy and security.</p>

            <h3>Features:</h3>
            <ul>
                <li><strong>Text Watermarks:</strong> Add custom text like "CONFIDENTIAL", "DRAFT", company names, or any text</li>
                <li><strong>QR Code Watermarks:</strong> Generate and embed QR codes containing URLs, text, or contact information</li>
                <li><strong>Custom Positioning:</strong> Choose from center, top-left, top-right, bottom-left, or bottom-right positions</li>
                <li><strong>Color Customization:</strong> Use full RGB color picker to match your branding</li>
                <li><strong>Font Size Control:</strong> Adjust watermark size from 10 to 100 points with slider</li>
                <li><strong>Automatic Rotation:</strong> Watermarks are applied at 45-degree diagonal angle for professional appearance</li>
                <li><strong>All Pages:</strong> Watermark is automatically applied to every page of your PDF</li>
                <li><strong>100% Client-Side:</strong> All processing happens in your browser - files never uploaded</li>
                <li><strong>No Limits:</strong> Watermark PDFs of any size with unlimited usage</li>
                <li><strong>Quality Preserved:</strong> Original PDF quality maintained in watermarked file</li>
            </ul>

            <h3>How to Add Watermark to PDF:</h3>
            <ul>
                <li>Upload your PDF file by clicking or dragging it</li>
                <li>Choose watermark type: text or QR code</li>
                <li>Enter your watermark text or QR code content</li>
                <li>Customize color, font size, and position</li>
                <li>Click "Add Watermark to PDF"</li>
                <li>Download your watermarked PDF file</li>
            </ul>

            <h3>Common Use Cases:</h3>
            <ul>
                <li>Add "CONFIDENTIAL" to sensitive business documents</li>
                <li>Mark documents as "DRAFT" or "SAMPLE" during review process</li>
                <li>Add copyright notices and company branding</li>
                <li>Embed QR codes linking to websites or product information</li>
                <li>Protect intellectual property with ownership watermarks</li>
                <li>Add "COPY" or "NOT FOR DISTRIBUTION" to prevent unauthorized sharing</li>
                <li>Brand proposals, reports, and presentations with company names</li>
                <li>Add tracking information via QR codes</li>
            </ul>

            <h3>Watermark Text Examples:</h3>
            <ul>
                <li><strong>Security:</strong> CONFIDENTIAL, PRIVILEGED, INTERNAL USE ONLY, PROPRIETARY</li>
                <li><strong>Status:</strong> DRAFT, SAMPLE, PREVIEW, REVIEW COPY, NOT FINAL</li>
                <li><strong>Copyright:</strong> COPYRIGHT © 2025 [Company Name], ALL RIGHTS RESERVED</li>
                <li><strong>Distribution:</strong> COPY, NOT FOR DISTRIBUTION, ORIGINAL, DUPLICATE</li>
                <li><strong>Branding:</strong> Your Company Name, Website URL, Contact Info</li>
            </ul>
        </div>

        <!-- Related Tools -->
        <div class="related-section">
            <h2>Related PDF Tools</h2>
            <div class="related-links">
                <a href="merge-pdf.jsp" class="related-link">📋 Merge PDF</a>
                <a href="split-pdf.jsp" class="related-link">✂️ Split PDF</a>
                <a href="compress-pdf.jsp" class="related-link">🗜️ Compress PDF</a>
                <a href="pdf-to-images.jsp" class="related-link">🖼️ PDF to Images</a>
            </div>
        </div>
    </div>

    <jsp:include page="footer.jsp" />
    <%@ include file="thanks.jsp"%>

    <!-- PDF Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.4.4/build/qrcode.min.js"></script>

    <script>
        // Initialize PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        // Global variables
        var dropArea = document.getElementById('fileDropArea');
        var fileInput = document.getElementById('pdfInput');
        var addWatermarkBtn = document.getElementById('addWatermarkBtn');
        var pdfJsDoc = null; // For preview rendering
        var totalPages = 0;

        dropArea.addEventListener('click', function() {
            fileInput.click();
        });

        dropArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            e.stopPropagation();
            dropArea.classList.add('drag-over');
        });

        dropArea.addEventListener('dragleave', function(e) {
            e.preventDefault();
            e.stopPropagation();
            dropArea.classList.remove('drag-over');
        });

        dropArea.addEventListener('drop', function(e) {
            e.preventDefault();
            e.stopPropagation();
            dropArea.classList.remove('drag-over');

            var files = e.dataTransfer.files;
            if (files.length > 0 && files[0].type === 'application/pdf') {
                fileInput.files = files;
                handleFileSelect();
            } else {
                showStatus('error', 'Please drop a valid PDF file');
            }
        });

        fileInput.addEventListener('change', handleFileSelect);

        async function handleFileSelect() {
            var file = fileInput.files[0];
            if (file && file.type === 'application/pdf') {
                dropArea.classList.add('has-file');
                document.getElementById('fileName').textContent = '✓ ' + file.name;
                document.getElementById('fileInfoDisplay').classList.add('active');
                addWatermarkBtn.disabled = false;
                showStatus('success', 'PDF loaded successfully! Generating preview...');
                document.getElementById('placeholderOutput').style.display = 'none';
                document.getElementById('downloadBtn').classList.remove('active');

                // Load PDF for preview
                try {
                    var arrayBuffer = await file.arrayBuffer();
                    pdfJsDoc = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                    totalPages = pdfJsDoc.numPages;

                    // Show preview section
                    document.getElementById('pdfPreviewSection').style.display = 'block';
                    generatePreview();
                } catch (error) {
                    console.error('Error loading PDF for preview:', error);
                    showStatus('error', 'Failed to load PDF preview: ' + error.message);
                }
            }
        }

        // Generate preview thumbnails
        async function generatePreview() {
            var previewContainer = document.getElementById('pdfPreview');
            previewContainer.innerHTML = '<div class="preview-loading"><span class="spinner"></span>Generating preview...</div>';

            previewContainer.innerHTML = '';

            for (var i = 1; i <= totalPages; i++) {
                try {
                    var page = await pdfJsDoc.getPage(i);

                    var previewItem = document.createElement('div');
                    previewItem.className = 'pdf-preview-item';

                    var canvas = document.createElement('canvas');
                    canvas.className = 'preview-thumbnail';

                    var label = document.createElement('div');
                    label.className = 'preview-label';
                    label.textContent = 'Page ' + i + ' of ' + totalPages;

                    previewItem.appendChild(canvas);
                    previewItem.appendChild(label);
                    previewContainer.appendChild(previewItem);

                    // Render thumbnail
                    var viewport = page.getViewport({ scale: 0.5 });
                    canvas.width = viewport.width;
                    canvas.height = viewport.height;
                    var context = canvas.getContext('2d');
                    await page.render({ canvasContext: context, viewport: viewport }).promise;

                } catch (error) {
                    console.error('Error generating preview for page ' + i + ':', error);
                }
            }

            showStatus('success', 'Preview loaded! Configure watermark and click "Add Watermark"');
        }

        // Toggle preview visibility
        var previewVisible = true;
        document.getElementById('togglePreviewBtn').addEventListener('click', function() {
            previewVisible = !previewVisible;
            var previewContainer = document.getElementById('pdfPreview');

            if (previewVisible) {
                previewContainer.style.display = 'grid';
                this.textContent = 'Hide Preview';
            } else {
                previewContainer.style.display = 'none';
                this.textContent = 'Show Preview';
            }
        });

        // Font size slider
        document.getElementById('fontSizeSlider').oninput = function() {
            document.getElementById('fontSizeValue').textContent = this.value;
        }

        // Add watermark function (calls appropriate watermark type)
        async function addWatermark() {
            var input = document.getElementById('pdfInput');
            if (!input.files[0]) {
                showStatus('error', 'Please upload a PDF file first');
                return;
            }

            var watermarkType = document.getElementById('watermarkType').value;

            showStatus('info', 'Processing PDF... Please wait');
            addWatermarkBtn.disabled = true;

            try {
                if (watermarkType === 'qr') {
                    var qrText = document.getElementById('watermarkText').value || 'CONFIDENTIAL';
                    var qrCanvas = await generateQRCode(qrText);
                    await addQRCodeWatermark(qrCanvas);
                } else {
                    await addTextWatermark();
                }
            } catch (error) {
                console.error('Error adding watermark:', error);
                showStatus('error', 'Failed to add watermark: ' + error.message);
                addWatermarkBtn.disabled = false;
            }
        }

        // Add text watermark
        async function addTextWatermark() {
            var input = document.getElementById('pdfInput');
            var file = input.files[0];

            if (!file) {
                showStatus('error', 'No PDF file selected');
                addWatermarkBtn.disabled = false;
                return;
            }

            var watermarkText = document.getElementById('watermarkText').value || 'CONFIDENTIAL';
            var watermarkColorInput = document.getElementById('watermarkColor').value;
            var fontSize = parseInt(document.getElementById('fontSizeSlider').value, 10);
            var watermarkPosition = document.getElementById('watermarkPosition').value;

            var watermarkColor = hexToRgb(watermarkColorInput);

            try {
                var arrayBuffer = await file.arrayBuffer();
                var pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);

                var helveticaFont = await pdfDoc.embedFont(PDFLib.StandardFonts.Helvetica);
                var pages = pdfDoc.getPages();

                pages.forEach(function(page) {
                    var size = page.getSize();
                    var width = size.width;
                    var height = size.height;
                    var x, y;

                    switch (watermarkPosition) {
                        case 'top-left':
                            x = 50;
                            y = height - 50 - fontSize;
                            break;
                        case 'top-right':
                            x = width - 50 - helveticaFont.widthOfTextAtSize(watermarkText, fontSize);
                            y = height - 50 - fontSize;
                            break;
                        case 'bottom-left':
                            x = 50;
                            y = 50;
                            break;
                        case 'bottom-right':
                            x = width - 50 - helveticaFont.widthOfTextAtSize(watermarkText, fontSize);
                            y = 50;
                            break;
                        case 'center':
                        default:
                            x = width / 2 - (helveticaFont.widthOfTextAtSize(watermarkText, fontSize) / 2);
                            y = height / 2;
                            break;
                    }

                    page.drawText(watermarkText, {
                        x: x,
                        y: y,
                        size: fontSize,
                        font: helveticaFont,
                        color: PDFLib.rgb(watermarkColor.r / 255, watermarkColor.g / 255, watermarkColor.b / 255),
                        opacity: 0.5,
                        rotate: PDFLib.degrees(-45),
                    });
                });

                var pdfBytes = await pdfDoc.save();
                downloadPDF(pdfBytes, 'Text_Watermarked.pdf');
            } catch (error) {
                console.error('Error adding text watermark:', error);
                showStatus('error', 'Failed to add watermark: ' + error.message);
                addWatermarkBtn.disabled = false;
            }
        }

        // Generate QR code
        async function generateQRCode(text) {
            var canvas = document.createElement('canvas');
            return new Promise(function(resolve, reject) {
                QRCode.toCanvas(canvas, text, { width: 200 }, function(error) {
                    if (error) {
                        reject(error);
                    } else {
                        resolve(canvas);
                    }
                });
            });
        }

        // Add QR code watermark
        async function addQRCodeWatermark(qrCanvas) {
            var input = document.getElementById('pdfInput');
            var file = input.files[0];

            if (!file) {
                showStatus('error', 'No PDF file selected');
                addWatermarkBtn.disabled = false;
                return;
            }

            try {
                var arrayBuffer = await file.arrayBuffer();
                var pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);

                // Convert QR canvas to blob
                var qrBlob = await new Promise(function(resolve) {
                    qrCanvas.toBlob(resolve);
                });

                var qrArrayBuffer = await qrBlob.arrayBuffer();
                var qrImageEmbed = await pdfDoc.embedPng(new Uint8Array(qrArrayBuffer));

                var pages = pdfDoc.getPages();
                pages.forEach(function(page) {
                    var size = page.getSize();
                    var width = size.width;
                    var height = size.height;
                    page.drawImage(qrImageEmbed, {
                        x: width / 2 - qrImageEmbed.width / 2,
                        y: height / 2 - qrImageEmbed.height / 2,
                        width: qrImageEmbed.width / 2,
                        height: qrImageEmbed.height / 2,
                        opacity: 0.5
                    });
                });

                var pdfBytes = await pdfDoc.save();
                downloadPDF(pdfBytes, 'QR_Watermarked.pdf');
            } catch (error) {
                console.error('Error adding QR watermark:', error);
                showStatus('error', 'Failed to add QR watermark: ' + error.message);
                addWatermarkBtn.disabled = false;
            }
        }

        // Hex to RGB converter
        function hexToRgb(hex) {
            var r = 0, g = 0, b = 0;
            if (hex.length == 4) {
                r = parseInt(hex[1] + hex[1], 16);
                g = parseInt(hex[2] + hex[2], 16);
                b = parseInt(hex[3] + hex[3], 16);
            } else if (hex.length == 7) {
                r = parseInt(hex[1] + hex[2], 16);
                g = parseInt(hex[3] + hex[4], 16);
                b = parseInt(hex[5] + hex[6], 16);
            }
            return { r: r, g: g, b: b };
        }

        // Download PDF
        function downloadPDF(pdfBytes, fileName) {
            var pdfBlob = new Blob([pdfBytes], { type: 'application/pdf' });
            var downloadUrl = URL.createObjectURL(pdfBlob);
            var downloadBtn = document.getElementById('downloadBtn');

            downloadBtn.classList.add('active');
            document.getElementById('placeholderOutput').style.display = 'none';
            showStatus('success', 'Watermark added successfully! Click the button below to download');

            downloadBtn.onclick = function() {
                var link = document.createElement('a');
                link.href = downloadUrl;
                link.download = fileName;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                setTimeout(function() {
                    showStatus('success', 'PDF downloaded successfully!');
                }, 500);
            };

            addWatermarkBtn.disabled = false;
        }

        // Show status message
        function showStatus(type, message) {
            var statusDiv = document.getElementById('statusMessage');
            statusDiv.className = 'status-message ' + type + ' active';
            statusDiv.textContent = message;

            if (type === 'success') {
                setTimeout(function() {
                    statusDiv.classList.remove('active');
                }, 5000);
            }
        }
    </script>
</div>
<%@ include file="body-close.jsp"%>
